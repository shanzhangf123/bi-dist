webpackJsonp([5],{zIg6:function(t,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=l("WT6e"),i=function(){},o=l("Xjw4"),r=l("7DMc"),s=l("YKDW"),u=l("JYEU"),a=l("Jk2t"),p=l("fuHo"),c=l("kiIb"),d=l("nZ76"),h=function(){function t(t,n,l,i){this.api=t,this.typeService=n,this.dialogService=l,this.userStorage=i,this.newPositionId=1,this.outClosePositionForm=new e.o,this.outPositionChange=new e.o,this.companyId=this.userStorage.getCurrentCid()}return t.prototype.ngOnInit=function(){},t.prototype.closePositionForm=function(){var t=function(t){var l=n.positionLevelList[t];l.position.forEach(function(t,n){""==t.p_name&&l.position.splice(n,1)})},n=this;for(var l in this.positionLevelList)t(l);this.outClosePositionForm.emit(!1)},Object.defineProperty(t.prototype,"setPositionLevel",{set:function(t){this.positionLevelList=t},enumerable:!0,configurable:!0}),t.prototype.newPositionLevel=function(){var t=0;for(var n in this.positionLevelList)parseInt(this.positionLevelList[n].p_level)>t&&(t=parseInt(this.positionLevelList[n].p_level));var l={p_level:(t+=1).toString(),position:Array(),level:""};l.level="1"===l.p_level?l.p_level+"st":"2"===l.p_level?l.p_level+"nd":"3"===l.p_level?l.p_level+"rd":l.p_level+"th",this.positionLevelList.push(l)},t.prototype.addNewLelveName=function(t,n){t.position.push({cid:this.companyId,is_ass:"0",p_level:t.p_level,pid:"p"+this.newPositionId,p_name:"",isEdit:!0})},t.prototype.levelNameInputFocus=function(t){this.originalLevelName=t.p_name},t.prototype.levelNameInputBlur=function(t,n){var l=this;if(""==t.p_name){for(var e in this.positionLevelList)if((r=this.positionLevelList[e]).p_level===t.p_level){var i=r.position.indexOf(t);r.position.splice(i,1)}return!1}var o=!1;for(var e in this.positionLevelList){var r;(r=this.positionLevelList[e]).p_level===t.p_level&&r.position.forEach(function(n){n.pid!=t.pid&&n.p_name==t.p_name&&(o=!0)})}o?this.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"warning",title:"Warning",text:"The name of the position at the same level can not be the same",closeEvent:function(){t.p_name=l.originalLevelName,n.focus()}}}):(t.isEdit=!1,this.outPositionChange.emit(this.positionLevelList))},t.prototype.editTheLevelName=function(t){t.isEdit=!t.isEdit},t.prototype.deleteTheLevel=function(t){var n=this;this.api.authPost("checkPosition",{pid:t.pid}).subscribe(function(l){if(l.status===a.b.SUCCESS)for(var e in n.positionLevelList){var i=n.positionLevelList[e];if(i.p_level===t.p_level){var o=i.position.indexOf(t);i.position.splice(o,1)}}else console.error("\u5224\u65ad\u804c\u4f4d\u662f\u5426\u53ef\u4ee5\u88ab\u5220\u9664\u5931\u8d25")})},t}(),f=e._8({encapsulation:0,styles:[[".s-edit-position-title[_ngcontent-%COMP%]{font-size:14px;position:relative;z-index:6;background-color:#fff;color:#080808;margin-left:20px;margin-top:20px}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]{position:absolute;top:5px;right:20px;display:block;cursor:pointer}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]::before{font-size:12px;color:#7b7a8a}.level-content[_ngcontent-%COMP%]{height:calc(100% - 160px);overflow:scroll}.level-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]{min-height:36px;line-height:36px;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:1px solid rgba(171,171,171,.5);color:#9193ab}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-title[_ngcontent-%COMP%]{font-size:12px;color:#7b7a8a;padding-left:19px;padding-right:21px;font-style:italic;border-top:1px solid rgba(226,226,233,.5);position:relative}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-title[_ngcontent-%COMP%]:hover   .bi-icon-add1[_ngcontent-%COMP%]{display:inline-block}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-title[_ngcontent-%COMP%]   .bi-icon-add1[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:20px;top:12px;display:none}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-title[_ngcontent-%COMP%]   .bi-icon-add1[_ngcontent-%COMP%]::before{font-size:12px}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]{padding-left:19px;padding-right:21px;font-style:italic;border-top:1px solid rgba(171,171,171,.5);font-size:12px;width:100%;background-color:#f7f7f7;position:relative}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{display:inline-block}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;height:37px;width:calc(100% - 50px);font-size:12px;color:#9193ab;font-style:italic}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:15px;cursor:pointer;display:none}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]::before{font-size:12px}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span.bi-icon-edit[_ngcontent-%COMP%]{right:40px}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span.bi-icon-edit[_ngcontent-%COMP%]:hover{color:#5e66d1}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span.bi-icon-combined-shape2[_ngcontent-%COMP%]{right:20px}.level-content[_ngcontent-%COMP%]   .position-level[_ngcontent-%COMP%]   .level-name[_ngcontent-%COMP%]   span.bi-icon-combined-shape2[_ngcontent-%COMP%]:hover{color:#f13362}.new-position-level[_ngcontent-%COMP%]{height:80px;line-height:80px;text-align:center;background-color:#f7f7f7;color:#9193ab}.new-position-level[_ngcontent-%COMP%]:hover{color:#7078f7}.new-position-level[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function _(t){return e._34(0,[(t()(),e._10(0,0,null,null,0,"span",[["class","bi-icon-add1"]],null,[[null,"click"]],function(t,n,l){var e=!0,i=t.component;return"click"===n&&(e=!1!==i.addNewLelveName(t.parent.context.$implicit,i.input)&&e),e},null,null))],null,null)}function g(t){return e._34(0,[(t()(),e._10(0,0,null,null,0,"span",[["class","bi-icon-edit"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.editTheLevelName(t.parent.parent.context.$implicit)&&e),e},null,null))],null,null)}function m(t){return e._34(0,[(t()(),e._10(0,0,null,null,0,"span",[["class","bi-icon-combined-shape2"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.deleteTheLevel(t.parent.parent.context.$implicit)&&e),e},null,null))],null,null)}function v(t){return e._34(0,[(t()(),e._10(0,0,null,null,7,"div",[["class","level-name"]],null,null,null,null,null)),(t()(),e._32(1,null,["\n          ","\n          "])),(t()(),e._5(16777216,null,null,1,null,g)),e._9(3,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n          "])),(t()(),e._5(16777216,null,null,1,null,m)),e._9(6,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n        "]))],function(t,n){t(n,3,0,1!=n.parent.context.$implicit.p_level),t(n,6,0,1!=n.parent.context.$implicit.p_level)},function(t,n){t(n,1,0,n.parent.context.$implicit.p_name)})}function y(t){return e._34(0,[(t()(),e._10(0,0,null,null,8,"div",[["class","level-name"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n          "])),(t()(),e._10(2,0,[["input",1]],null,5,"input",[["class","g-raduis2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,3)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,3).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,3)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,3)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(t.parent.context.$implicit.p_name=l)&&i),"focus"===n&&(i=!1!==o.levelNameInputFocus(t.parent.context.$implicit)&&i),"blur"===n&&(i=!1!==o.levelNameInputBlur(t.parent.context.$implicit,e._22(t,2))&&i),i},null,null)),e._9(3,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._28(1024,null,r.l,function(t){return[t]},[r.d]),e._9(5,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(7,16384,null,0,r.n,[r.m],null,null),(t()(),e._32(-1,null,["\n        "]))],function(t,n){t(n,5,0,n.parent.context.$implicit.p_name)},function(t,n){t(n,2,0,e._22(n,7).ngClassUntouched,e._22(n,7).ngClassTouched,e._22(n,7).ngClassPristine,e._22(n,7).ngClassDirty,e._22(n,7).ngClassValid,e._22(n,7).ngClassInvalid,e._22(n,7).ngClassPending)})}function b(t){return e._34(0,[(t()(),e._10(0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,v)),e._9(3,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,y)),e._9(6,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n      "]))],function(t,n){t(n,3,0,!n.context.$implicit.isEdit),t(n,6,0,n.context.$implicit.isEdit)},null)}function x(t){return e._34(0,[(t()(),e._10(0,0,null,null,14,"li",[["class","position-level"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(2,0,null,null,8,"div",[["class","level-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(4,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),e._32(5,null,[""," ",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,_)),e._9(9,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._5(16777216,null,null,1,null,b)),e._9(13,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n    "]))],function(t,n){t(n,9,0,1!=n.context.$implicit.p_level),t(n,13,0,null==n.context.$implicit?null:n.context.$implicit.position)},function(t,n){t(n,5,0,n.context.$implicit.level,e._33(n,5,1,e._22(n,6).transform("LEVEL")))})}function w(t){return e._34(0,[(t()(),e._10(0,0,null,null,4,"p",[["class","s-edit-position-title f7-f "]],null,null,null,null,null)),(t()(),e._32(1,null,["\n  ","\n  "])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._10(3,0,null,null,0,"span",[["class","bi-icon-close"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.closePositionForm()&&e),e},null,null)),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._10(6,0,null,null,7,"div",[["class","level-content scrollbar"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(8,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,x)),e._9(11,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._10(15,0,null,null,5,"div",[["class","new-position-level"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(17,0,null,null,2,"span",[],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.newPositionLevel()&&e),e},null,null)),(t()(),e._32(18,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n"]))],function(t,n){t(n,11,0,n.component.positionLevelList)},function(t,n){t(n,1,0,e._33(n,1,0,e._22(n,2).transform("POSITION GRADE"))),t(n,18,0,e._33(n,18,0,e._22(n,19).transform("NEW POSITION GRADE")))})}var S=l("tBE9"),C=l("Uo70"),P=l("F1jI"),O=l("+j5Y"),I=l("9Sd6"),M=l("o9C1"),k=l("QWdC"),L=l("sPF1"),D=l("2ZKb"),E=l("GCad"),F=l("ViJu"),T=l("mj9b"),A=l("+Q31"),N=function(){function t(t,n,l,i){this.toggleSelectService=t,this.dialogService=n,this.typeService=l,this.renderer=i,this.employeeDropdownSettings=new A.b,this.employeeDropdownObj={},this.superiorDropdownSettings=new A.b,this.superiorDropdownObj={},this.superiorSelectedPosition={},this.adminSettings=new A.b,this.adminDropdownObj={},this.subordinatesSettings=new A.b,this.subordinatesDropdownObj={},this.positionTitleArr=[],this.isNew=!0,this.outCloseStaffForm=new e.o,this.outAddId=new e.o,this.outEditPosition=new e.o,this.outNewLevel=new e.o}return t.prototype.ngOnInit=function(){this.subordinatesSettings.readonly=!0},t.prototype.ngOnChanges=function(){if(this.buildEmployeeDropdown(),this.buildSuperiorDropdown(),this.buildAdminDropdown(),this.positionTitleArr&&0!=this.editStaffInfo.tid)for(var t in this.positionTitleArr)if(this.positionTitleArr[t].tid==this.editStaffInfo.tid){this.editStaffInfo.title_name=this.positionTitleArr[t].title_name;break}},Object.defineProperty(t.prototype,"setEditStaffInfo",{set:function(t){this.editStaffInfo=t,this.currentEditType=this.editStaffInfo.editType,this.positionLevelDisable=!1,this.titleNameDisable=!1,"1"==this.editStaffInfo.is_ass&&(this.editStaffInfo.p_name="",this.superiorDropdownSettings.readonly=!0,this.positionLevelDisable=!0,this.titleNameDisable=!1,this.superiorSelectedPosition.id=this.editStaffInfo.parent_id),"sub"==this.editStaffInfo.editType&&(this.superiorDropdownSettings.readonly=!0,this.positionLevelDisable=!1,this.titleNameDisable=!1,this.superiorSelectedPosition.id=this.editStaffInfo.parent_id),"pos"==this.editStaffInfo.editType&&(this.superiorDropdownSettings.readonly=!0,this.isNew=!1,this.titleNameDisable=!1,this.positionLevelDisable=!0),this.editStaffInfo&&this.staffList&&this.allStructure&&this.buildEmployeeDropdown()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setPositionTitle",{set:function(t){this.positionTitleArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStaffList",{set:function(t){this.staffList=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setAllStructure",{set:function(t){this.allStructure=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setPositionLevel",{set:function(t){var n=this;this.positionLevelListClone=[],this.positionLevelList=[],t&&t.forEach(function(t){1!=t.p_level&&(n.positionLevelListClone.push(t),n.positionLevelList.push(t))})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setDepartmentId",{set:function(t){this.departmentId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setNewStructureId",{set:function(t){this.newPositionStructureId=t},enumerable:!0,configurable:!0}),t.prototype.closeStaffForm=function(){this.outCloseStaffForm.emit([!1])},t.prototype.employeeChange=function(t){this.employeeSelectArray=t},t.prototype.superiorChange=function(t){this.superiorSelectArray=t,"-1"==this.editStaffInfo.did&&this.superiorSelectArray.length>0&&(this.editStaffInfo.did=this.departmentId?this.departmentId:"0"),this.superiorSelectedPosition=t[0],this.superiorSelectedPosition&&(this.editStaffInfo.parent_id=this.superiorSelectedPosition.id),this.filterPositionLevel(2)},t.prototype.adminChange=function(t){this.adminSelectedArr=t},t.prototype.buildEmployeeDropdown=function(){var t=this;if(this.employeeDropdownSettings.readonly=1==this.editStaffInfo.p_level&&1!=this.editStaffInfo.is_ass&&"pos"==this.editStaffInfo.editType,this.employeeDropdownSettings.group=[],this.employeeDropdownSettings.group.push({key:"pending",title:"PENDING"}),this.employeeDropdownSettings.isMultiple=!1,this.employeeDropdownObj.pending=[],this.staffList.forEach(function(n){if(2==n.status||0==n.status){var l=new A.a;l.initData({id:n.sid,isCurrent:!1,label:n.work_name,key:n.work_name,imageLabel:n.profile?n.profile:"",group:"pending"}),t.employeeDropdownObj.pending.push(l)}}),"pos"==this.currentEditType&&parseInt(this.editStaffInfo.sid)){var n=new A.a;n.initData({id:this.editStaffInfo.sid,isCurrent:!0,label:this.editStaffInfo.work_name,key:this.editStaffInfo.work_name,imageLabel:this.editStaffInfo.profile?this.editStaffInfo.profile:"",group:"pending"}),this.employeeDropdownObj.pending.push(n)}for(var l in this.employeeDropdownObj.pending)this.employeeDropdownObj.pending[l].id==this.editStaffInfo.sid&&(this.employeeSelectArray=[this.employeeDropdownObj.pending[l]])},t.prototype.buildSuperiorDropdown=function(){var t=this;this.superiorDropdownSettings.group=[],this.superiorDropdownSettings.group.push({key:"superior",title:"SUPERIOR"}),this.superiorDropdownSettings.isMultiple=!1,this.superiorDropdownObj.superior=[];var n=this.superiorSelectArray?this.superiorSelectArray:[];if("-1"==this.editStaffInfo.did)this.allStructure.forEach(function(n){if("0"==n.is_ass){var l=new A.a;l.initData({id:n.id,isCurrent:!1,label:n.work_name?n.work_name:n.title_name+n.p_name,key:n.work_name?n.work_name:n.title_name+n.p_name,imageLabel:n.profile?n.profile:"",group:"superior",desc:n.p_name}),t.superiorDropdownObj.superior.push(l)}}),this.superiorSelectArray=n;else{var l,e=this.editStaffInfo.hasOwnProperty("nodes")&&this.editStaffInfo.nodes.length>0,i=this.editStaffInfo.parent_id;for(var o in this.allStructure)if((r=this.allStructure[o]).id==i){this.superiorDropdownObj.superior.push(this.setSuperiorOrAdminOrSubOptions(l=r));break}if(l){if(n.length?n=[this.setSuperiorOrAdminOrSubOptions(l)]:n.push(this.setSuperiorOrAdminOrSubOptions(l)),!e&&parseInt(this.editStaffInfo.p_level)-parseInt(l.p_level)>1)for(var o in this.allStructure){var r;if((r=this.allStructure[o]).id!=l.id&&"0"==r.is_ass&&r.did==l.did&&parseInt(r.p_level)<parseInt(this.editStaffInfo.p_level)&&r.parent_id==l.id){var s=this.setSuperiorOrAdminOrSubOptions(r);this.superiorDropdownObj.superior.push(s)}}this.superiorSelectArray=n}else this.superiorDropdownObj.superior=[],this.superiorSelectArray=[];this.filterPositionLevel(1)}},t.prototype.setSuperiorOrAdminOrSubOptions=function(t){var n,l=new A.a;return n=t&&t.profile?{id:t.id,isCurrent:!1,label:t.work_name,desc:(t.title_name?t.title_name+" ":"")+t.p_name+("1"==t.is_ass?" assistant":"")+" Lv"+parseInt(t.p_level),key:t.work_name,imageLabel:t.profile?t.profile:"NaN"}:{id:t.id,isCurrent:!1,label:"Job Vacancy ID:"+t.id,key:t.p_name+"("+t.id+")",desc:(t.title_name?t.title_name+" ":"")+t.p_name+("1"==t.is_ass?" assistant":"")+"  Lv"+parseInt(t.p_level),imageLabel:t.profile?t.profile:"NaN"},l.initData(n),l},t.prototype.buildAdminDropdown=function(){var t=this;1==this.editStaffInfo.p_level&&(this.adminSettings.readonly=!0),this.adminSettings.group=[],this.adminSettings.group.push({key:"admin",title:"ADMIN"}),this.adminSettings.isMultiple=!1,this.adminDropdownObj.admin=[],this.allStructure.forEach(function(n){if("0"==n.is_ass){var l=new A.a;l.initData({id:n.id,isCurrent:!1,label:n.work_name?n.work_name:n.title_name+n.p_name,key:n.work_name?n.work_name:n.title_name+n.p_name,imageLabel:n.profile?n.profile:"NaN",group:"admin",desc:n.p_name}),t.adminDropdownObj.admin.push(l)}})},t.prototype.choosePositionLevel=function(t,n){this.editStaffInfo.p_name=t.p_name,this.editStaffInfo.pid=t.pid,this.editStaffInfo.p_level=t.p_level,this.renderer.setElementClass(n,"hide",!0),this.toggleSelectService.emptyElement()},t.prototype.saveStaffPositionInfo=function(){if("0"!=this.editStaffInfo.is_ass||"0"!=this.editStaffInfo.pid&&this.editStaffInfo.pid)if(this.superiorSelectedPosition||!this.isNew||"ass"==this.editStaffInfo.editType){var t,n;if(this.isNew&&(this.newPositionStructureId++,this.outAddId.emit(this.newPositionStructureId),this.editStaffInfo.id="ps"+this.newPositionStructureId),this.superiorSelectedPosition&&this.superiorSelectedPosition.id&&(this.editStaffInfo.parent_id=this.superiorSelectedPosition.id),t=this.typeService.clone(this.editStaffInfo).sid,this.employeeSelectArray&&this.employeeSelectArray.length){var l=this.getPendingByOptionId(this.employeeSelectArray[0].id);n=l.sid,this.editStaffInfo.sid=l.sid,this.editStaffInfo.uuid=l.uuid,this.editStaffInfo.work_name=l.work_name,this.editStaffInfo.profile=l.profile,this.editStaffInfo.s_type="u"}else this.editStaffInfo.sid="",this.editStaffInfo.uuid="0",this.editStaffInfo.work_name="",this.editStaffInfo.profile="",this.editStaffInfo.s_type="p";this.outEditPosition.emit([this.editStaffInfo,t,n,this.isNew]),this.outCloseStaffForm.emit([!1])}else this.openDialog("The superior must be chosen");else this.openDialog("The position level cannot be empty")},t.prototype.getPendingByOptionId=function(t){var n;for(var l in this.staffList)if(t==this.staffList[l].sid){n=this.staffList[l];break}return n||!1},t.prototype.getPositionStructureById=function(t,n){var l,e=n||"id";for(var i in this.allStructure)if(this.allStructure[i][e]==t){l=this.allStructure[i];break}return l||!1},t.prototype.filterPositionLevel=function(t){var n=[];if(1==t){var l=parseInt(this.editStaffInfo.p_level);if(!l){var e=void 0;for(var i in this.allStructure)if(this.allStructure[i].id==this.superiorSelectedPosition.id){e=this.allStructure[i];break}l=parseInt(e.p_level)}this.positionLevelListClone.forEach(function(t){parseInt(t.p_level)>l&&n.push(t)})}else if(2==t){if(e=void 0,!this.superiorSelectedPosition)return;for(var i in this.allStructure)if(this.allStructure[i].id==this.superiorSelectedPosition.id){e=this.allStructure[i];break}var o=parseInt(e.p_level);this.positionLevelListClone.forEach(function(t){parseInt(t.p_level)>o&&n.push(t)})}this.positionLevelList=n},t.prototype.newPositionLevel=function(){this.outNewLevel.emit(!0)},t.prototype.openDialog=function(t){this.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"remind",title:"Remind",text:t,closeEvent:function(){}}})},t}(),j=e._8({encapsulation:0,styles:[[".s-edit-position-title[_ngcontent-%COMP%]{font-size:14px;position:relative;z-index:6;background-color:#fff;color:#080808;margin-left:20px;margin-top:20px}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]{position:absolute;top:5px;right:20px;display:block;cursor:pointer}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]::before{font-size:12px;color:#7b7a8a}.drowdown-warp[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:20px}.position-warp[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.position-warp[_ngcontent-%COMP%]   .position-grade[_ngcontent-%COMP%], .position-warp[_ngcontent-%COMP%]   .position-name[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   .level-title[_ngcontent-%COMP%]{color:#9193ab;margin:10px;display:inline-block;font-weight:200}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   .d-select[_ngcontent-%COMP%]   .dropdown-select[_ngcontent-%COMP%]{height:200px;overflow-x:hidden;overflow-y:scroll}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   .d-select[_ngcontent-%COMP%]   .new-level[_ngcontent-%COMP%]{width:100%;height:40px;background:#f7f7f7;line-height:40px;color:#9193ab;-webkit-transition:.2s linear;transition:.2s linear;position:absolute;bottom:0;left:0;text-align:center;cursor:pointer}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;font-size:12px;cursor:pointer}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.se-title[_ngcontent-%COMP%]{cursor:default;background-color:#fff!important;color:#7b7a8a!important}.position-warp[_ngcontent-%COMP%]   .position-grade-div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:last-child{margin-bottom:40px}.position-warp[_ngcontent-%COMP%]   .position-grade-input[_ngcontent-%COMP%]{width:100%;height:34px;line-height:13px;border:1px solid rgba(171,171,171,.5);background-color:#fff;text-indent:6px;font-size:13px;border-radius:2px;color:#7b7a8a}.position-warp[_ngcontent-%COMP%]   .position-grade-input[_ngcontent-%COMP%]:hover{border-color:#5e66d1}.mat-select-box[_ngcontent-%COMP%]{position:relative}.mat-select-box[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{position:absolute;right:0;top:15px}.mat-select-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:35px;border-radius:2px;background-color:#fff;border:.5px solid #d9d9d9;padding:5px;font-size:12px}.mat-select-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .mat-select-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#5e66d1}.btn-save[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:20px}"]],data:{}});function B(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,n,l){var i=!0;return"click"===n&&(i=!1!==e._22(t,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==e._22(t,1)._handleKeydown(l)&&i),i},S.c,S.a)),e._9(1,8437760,[[1,4]],0,C.t,[e.l,e.h,[2,C.l],[2,C.s]],{value:[0,"value"]},null),(t()(),e._32(2,0,["\n          ","\n        "]))],function(t,n){t(n,1,0,n.context.$implicit.title_name)},function(t,n){t(n,0,0,e._22(n,1)._getTabIndex(),e._22(n,1).selected,e._22(n,1).multiple,e._22(n,1).active,e._22(n,1).id,e._22(n,1).selected.toString(),e._22(n,1).disabled.toString(),e._22(n,1).disabled),t(n,2,0,null==n.context.$implicit?null:n.context.$implicit.title_name)})}function G(t){return e._34(0,[(t()(),e._10(0,0,null,null,25,"div",[["class","mat-select-box"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(2,16777216,null,null,7,"input",[["aria-autocomplete","list"],["autocomplete","off"],["class","autocomplete-input"],["matInput",""],["role","combobox"],["type","text"]],[[8,"placeholder",0],[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focusin"],[null,"keydown"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,3)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,3).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,3)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,3)._compositionEnd(l.target.value)&&i),"focusin"===n&&(i=!1!==e._22(t,4)._handleFocus()&&i),"blur"===n&&(i=!1!==e._22(t,4)._onTouched()&&i),"input"===n&&(i=!1!==e._22(t,4)._handleInput(l)&&i),"keydown"===n&&(i=!1!==e._22(t,4)._handleKeydown(l)&&i),"ngModelChange"===n&&(i=!1!==(o.editStaffInfo.title_name=l)&&i),i},null,null)),e._9(3,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._9(4,147456,null,0,P.f,[e.l,O.c,e.T,e.B,e.h,P.b,[2,I.c],[8,null],[2,o.d]],{autocomplete:[0,"autocomplete"]},null),e._28(1024,null,r.l,function(t,n){return[t,n]},[r.d,P.f]),e._9(6,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(8,16384,null,0,r.n,[r.m],null,null),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(11,0,null,null,3,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(13,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(16,0,null,null,8,"mat-autocomplete",[["class","scrollbar mat-autocomplete"]],null,null,null,M.b,M.a)),e._28(6144,null,C.l,null,[P.d]),e._9(18,1097728,[["position",4]],2,P.d,[e.h,e.l,[2,P.a]],{classList:[0,"classList"]},null),e._30(603979776,1,{options:1}),e._30(603979776,2,{optionGroups:1}),(t()(),e._32(-1,0,["\n        "])),(t()(),e._5(16777216,null,0,1,null,B)),e._9(23,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,0,["\n      "])),(t()(),e._32(-1,null,["\n    "]))],function(t,n){var l=n.component;t(n,4,0,e._22(n,18)),t(n,6,0,l.editStaffInfo.title_name),t(n,18,0,"scrollbar"),t(n,23,0,l.positionTitleArr)},function(t,n){t(n,2,1,[e._13(1,"",e._33(n,2,0,e._22(n,9).transform("Position name")),""),null==e._22(n,4).activeOption?null:e._22(n,4).activeOption.id,e._22(n,4).panelOpen.toString(),null==e._22(n,4).autocomplete?null:e._22(n,4).autocomplete.id,e._22(n,8).ngClassUntouched,e._22(n,8).ngClassTouched,e._22(n,8).ngClassPristine,e._22(n,8).ngClassDirty,e._22(n,8).ngClassValid,e._22(n,8).ngClassInvalid,e._22(n,8).ngClassPending])})}function R(t){return e._34(0,[(t()(),e._10(0,0,null,null,9,"div",[["class","mat-select-box"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(2,0,null,null,6,"input",[["class","autocomplete-input"],["readonly",""],["type","text"]],[[2,"g-no-allow",null],[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,3)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,3).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,3)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,3)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(o.editStaffInfo.title_name=l)&&i),i},null,null)),e._9(3,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._28(1024,null,r.l,function(t){return[t]},[r.d]),e._9(5,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(7,16384,null,0,r.n,[r.m],null,null),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "]))],function(t,n){t(n,5,0,n.component.editStaffInfo.title_name)},function(t,n){t(n,2,0,n.component.titleNameDisable,e._13(1,"",e._33(n,2,1,e._22(n,8).transform("Position name")),""),e._22(n,7).ngClassUntouched,e._22(n,7).ngClassTouched,e._22(n,7).ngClassPristine,e._22(n,7).ngClassDirty,e._22(n,7).ngClassValid,e._22(n,7).ngClassInvalid,e._22(n,7).ngClassPending)})}function z(t){return e._34(0,[(t()(),e._10(0,0,null,null,4,"li",[],null,[[null,"click"]],function(t,n,l){var i=!0;return"click"===n&&(i=!1!==t.component.choosePositionLevel(t.context.$implicit,e._22(t.parent.parent,16))&&i),i},null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),e._32(3,null,["",""])),(t()(),e._32(-1,null,["\n            "]))],null,function(t,n){t(n,3,0,n.context.$implicit.p_name)})}function H(t){return e._34(0,[(t()(),e._10(0,0,null,null,11,"ul",[["class","g-max-height-inherit scrollbar"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(2,0,null,null,5,"li",[["class","se-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(4,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),e._32(5,null,[""," ",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._5(16777216,null,null,1,null,z)),e._9(10,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n          "]))],function(t,n){t(n,10,0,n.context.$implicit.position)},function(t,n){t(n,5,0,n.context.$implicit.level,e._33(n,5,1,e._22(n,6).transform("LEVEL")))})}function $(t){return e._34(0,[(t()(),e._10(0,0,null,null,35,"div",[["class","g-relative position-grade-div"],["toggleSelectGroup",""]],null,null,null,null,null)),e._28(512,null,k.a,k.a,[L.a]),e._9(2,4276224,null,5,D.a,[e.G,k.a,E.a],null,null),e._30(335544320,3,{toggleSelectBut:0}),e._30(335544320,4,{toggleSelect:0}),e._30(335544320,5,{toggleClose:0}),e._30(335544320,6,{toggleSelectContent:0}),e._30(335544320,7,{toggleInput:0}),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(9,0,[[3,0],["toggleSelectBut",1]],null,5,"input",[["class","position-grade-input g-raduis2"],["readonly",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,10)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,10).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,10)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,10)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(o.editStaffInfo.p_name=l)&&i),i},null,null)),e._9(10,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._28(1024,null,r.l,function(t){return[t]},[r.d]),e._9(12,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(14,16384,null,0,r.n,[r.m],null,null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(16,0,[[4,0],["toggleSelect",1]],null,18,"div",[["class","d-select"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(18,0,null,null,11,"div",[["class","dropdown-select scrollbar"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n          "])),(t()(),e._10(20,0,null,null,5,"div",[["class","level-title f14-f clearfix cursor"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(22,0,null,null,2,"span",[["class","pull-left"]],null,null,null,null,null)),(t()(),e._32(23,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n          "])),(t()(),e._32(-1,null,["\n          "])),(t()(),e._5(16777216,null,null,1,null,H)),e._9(28,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n        "])),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(31,0,null,null,2,"div",[["class","new-level"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.newPositionLevel()&&e),e},null,null)),(t()(),e._32(32,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "]))],function(t,n){var l=n.component;t(n,2,0),t(n,12,0,l.editStaffInfo.p_name),t(n,28,0,l.positionLevelList)},function(t,n){t(n,9,0,e._22(n,14).ngClassUntouched,e._22(n,14).ngClassTouched,e._22(n,14).ngClassPristine,e._22(n,14).ngClassDirty,e._22(n,14).ngClassValid,e._22(n,14).ngClassInvalid,e._22(n,14).ngClassPending),t(n,23,0,e._33(n,23,0,e._22(n,24).transform("what is level"))),t(n,32,0,e._33(n,32,0,e._22(n,33).transform("NEW LEVEL")))})}function U(t){return e._34(0,[(t()(),e._10(0,0,null,null,15,"div",[["class","g-relative position-grade-div"],["toggleSelectGroup",""]],null,null,null,null,null)),e._28(512,null,k.a,k.a,[L.a]),e._9(2,4276224,null,5,D.a,[e.G,k.a,E.a],null,null),e._30(335544320,8,{toggleSelectBut:0}),e._30(335544320,9,{toggleSelect:0}),e._30(335544320,10,{toggleClose:0}),e._30(335544320,11,{toggleSelectContent:0}),e._30(335544320,12,{toggleInput:0}),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(9,0,[[8,0],["toggleSelectBut",1]],null,5,"input",[["class","position-grade-input g-no-allow g-raduis2"],["readonly",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,10)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,10).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,10)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,10)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(o.editStaffInfo.p_name=l)&&i),i},null,null)),e._9(10,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._28(1024,null,r.l,function(t){return[t]},[r.d]),e._9(12,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(14,16384,null,0,r.n,[r.m],null,null),(t()(),e._32(-1,null,["\n    "]))],function(t,n){var l=n.component;t(n,2,0),t(n,12,0,l.editStaffInfo.p_name)},function(t,n){t(n,9,0,e._22(n,14).ngClassUntouched,e._22(n,14).ngClassTouched,e._22(n,14).ngClassPristine,e._22(n,14).ngClassDirty,e._22(n,14).ngClassValid,e._22(n,14).ngClassInvalid,e._22(n,14).ngClassPending)})}function W(t){return e._34(0,[(t()(),e._10(0,0,null,null,4,"p",[["class","s-edit-position-title f7-f "]],null,null,null,null,null)),(t()(),e._32(1,null,["\n  ","\n  "])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._10(3,0,null,null,0,"span",[["class","bi-icon-close"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.closeStaffForm()&&e),e},null,null)),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(7,0,null,null,16,"div",[["class","drowdown-warp"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(9,0,null,null,9,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(11,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(12,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(15,0,null,null,2,"span",[["class","g-title-require"]],null,null,null,null,null)),(t()(),e._32(16,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(20,0,null,null,2,"bi-dropdown",[],null,[[null,"outSelectChange"]],function(t,n,l){var e=!0;return"outSelectChange"===n&&(e=!1!==t.component.employeeChange(l)&&e),e},F.b,F.a)),e._9(21,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"],selectedOption:[1,"selectedOption"],inputDropdownObj:[2,"inputDropdownObj"]},{outSelectChange:"outSelectChange"}),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(26,0,null,null,20,"div",[["class","drowdown-warp"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(28,0,null,null,9,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(30,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(31,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(34,0,null,null,2,"span",[["class","g-title-require"]],null,null,null,null,null)),(t()(),e._32(35,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(39,0,null,null,2,"bi-dropdown",[],null,[[null,"outSelectChange"]],function(t,n,l){var e=!0;return"outSelectChange"===n&&(e=!1!==t.component.superiorChange(l)&&e),e},F.b,F.a)),e._9(40,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"],selectedOption:[1,"selectedOption"],inputDropdownObj:[2,"inputDropdownObj"]},{outSelectChange:"outSelectChange"}),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(43,0,null,null,2,"div",[["class","g-desc m-t-5"]],null,null,null,null,null)),(t()(),e._32(44,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(49,0,null,null,16,"div",[["class","drowdown-warp"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(51,0,null,null,5,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(53,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(54,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(58,0,null,null,2,"bi-dropdown",[],null,[[null,"outSelectChange"]],function(t,n,l){var e=!0;return"outSelectChange"===n&&(e=!1!==t.component.adminChange(l)&&e),e},F.b,F.a)),e._9(59,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"],inputDropdownObj:[1,"inputDropdownObj"]},{outSelectChange:"outSelectChange"}),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(62,0,null,null,2,"div",[["class","g-desc m-t-5"]],null,null,null,null,null)),(t()(),e._32(63,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(68,0,null,null,12,"div",[["class","drowdown-warp"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(70,0,null,null,5,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(72,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(73,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(77,0,null,null,2,"bi-dropdown",[],null,null,null,F.b,F.a)),e._9(78,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"],selectedOption:[1,"selectedOption"],inputDropdownObj:[2,"inputDropdownObj"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(84,0,null,null,40,"div",[["class","drowdown-warp position-warp"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(86,0,null,null,17,"div",[["class","position-name m-r-20"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(88,0,null,null,6,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(90,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(91,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,G)),e._9(98,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,R)),e._9(102,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(107,0,null,null,15,"div",[["class","position-grade"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(109,0,null,null,5,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(111,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(112,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,$)),e._9(117,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,U)),e._9(121,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(127,0,null,null,2,"div",[["class","pull-right g-button button-upload  btn-save m-t-15 m-r-10"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.saveStaffPositionInfo()&&e),e},null,null)),(t()(),e._32(128,null,["\n  ","\n"])),e._25(131072,s.j,[s.k,e.h])],function(t,n){var l=n.component;t(n,21,0,l.employeeDropdownSettings,l.employeeSelectArray,l.employeeDropdownObj),t(n,40,0,l.superiorDropdownSettings,l.superiorSelectArray,l.superiorDropdownObj),t(n,59,0,l.adminSettings,l.adminDropdownObj),t(n,78,0,l.subordinatesSettings,l.subordinatesSelectedArr,l.subordinatesDropdownObj),t(n,98,0,!l.titleNameDisable),t(n,102,0,l.titleNameDisable),t(n,117,0,!l.positionLevelDisable),t(n,121,0,l.positionLevelDisable)},function(t,n){t(n,1,0,e._33(n,1,0,e._22(n,2).transform("EDIT POSITION"))),t(n,12,0,e._33(n,12,0,e._22(n,13).transform("EMPLOYEE"))),t(n,16,0,e._33(n,16,0,e._22(n,17).transform("required"))),t(n,31,0,e._33(n,31,0,e._22(n,32).transform("SUPERIOR"))),t(n,35,0,e._33(n,35,0,e._22(n,36).transform("required"))),t(n,44,0,e._33(n,44,0,e._22(n,45).transform("Person to be directly reported to"))),t(n,54,0,e._33(n,54,0,e._22(n,55).transform("ADMIN MANAGER"))),t(n,63,0,e._33(n,63,0,e._22(n,64).transform("Daily admin management"))),t(n,73,0,e._33(n,73,0,e._22(n,74).transform("SUBORDINATES"))),t(n,91,0,e._33(n,91,0,e._22(n,92).transform("POSITION NAME"))),t(n,112,0,e._33(n,112,0,e._22(n,113).transform("POSITION GRADE"))),t(n,128,0,e._33(n,128,0,e._22(n,129).transform("SAVE")))})}var Q=function(){function t(t){this.dialogService=t,this.companyId=0,this.departmentId=0,this.localDepartmentInfo={},this.leaderDropdownSettings=new A.b,this.leaderDropdownObj={},this.memberDropdownSettings=new A.b,this.outCloseDepartmentForm=new e.o,this.outSaveDepartment=new e.o}return Object.defineProperty(t.prototype,"setDepartmentInfo",{set:function(t){for(var n in this.localDepartmentInfo=t.department,this.departmentListSet=t.all,this.isNew=!0,this.departmentListSet)this.departmentListSet[n].did==this.localDepartmentInfo.did&&(this.isNew=!1);this.buildLeaderDropdown(t.leader)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setCompanyId",{set:function(t){this.companyId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setDepartmentId",{set:function(t){this.departmentId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStructureUser",{set:function(t){this.localStructureInfo=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.memberDropdownSettings.readonly=!0},t.prototype.closeDepartmentForm=function(){this.outCloseDepartmentForm.emit(!1)},t.prototype.leaderChange=function(t){},t.prototype.buildLeaderDropdown=function(t){for(var n in this.leaderDropdownSettings.group=[],this.leaderDropdownSettings.group.push({key:"leader",title:"LEADER"}),this.leaderDropdownSettings.isMultiple=!1,this.leaderDropdownSettings.readonly=!0,this.leaderDropdownObj.leader=[],t)this.leaderDropdownObj.leader.push(this.setDepartmentMemberOptions(t[n]));this.leaderSelectArray=[this.leaderDropdownObj.leader[0]]},t.prototype.setDepartmentMemberOptions=function(t){var n,l=new A.a;return n=t&&t.profile?{id:t.id,isCurrent:!1,label:t.work_name,desc:(t.title_name?t.title_name+" ":"")+t.p_name+("1"==t.is_ass?" assistant":"")+" Lv"+parseInt(t.p_level),imageLabel:t.profile?t.profile:"NaN"}:{id:t.id,isCurrent:!1,label:"Job Vacancy ID:"+t.id,desc:(t.title_name?t.title_name+" ":"")+t.p_name+("1"==t.is_ass?" assistant":"")+"  Lv"+parseInt(t.p_level),imageLabel:t.profile?t.profile:"NaN"},l.initData(n),l},t.prototype.saveDepartmentInfo=function(){if(""!=this.localDepartmentInfo.name&&0!=this.leaderSelectArray.length){for(var t in this.departmentListSet)if(this.departmentListSet[t].did!=this.localDepartmentInfo.did&&this.departmentListSet[t].name==this.localDepartmentInfo.name)return;var n;for(var l in this.localStructureInfo)if(this.localStructureInfo[l].id==this.leaderSelectArray[0].id){n=this.localStructureInfo[l];break}this.outSaveDepartment.emit([this.isNew?"new":"edit",this.localDepartmentInfo,n]),this.outCloseDepartmentForm.emit(!1)}},t.prototype.deleteDepartment=function(){if(this.localDepartmentInfo.staff&&this.localDepartmentInfo.staff.length)return this.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"warning",title:"Warning",text:"There are employees in the department. If you need to remove the department, please delete all employees in the department first!"}}),!1;this.outSaveDepartment.emit(["delete",this.localDepartmentInfo])},t}(),q=e._8({encapsulation:0,styles:[[".s-edit-position-title[_ngcontent-%COMP%]{font-size:14px;position:relative;z-index:6;background-color:#fff;color:#080808;margin-left:20px;margin-top:20px}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]{position:absolute;top:5px;right:20px;display:block;cursor:pointer}.s-edit-position-title[_ngcontent-%COMP%]   .bi-icon-close[_ngcontent-%COMP%]::before{font-size:12px;color:#7b7a8a}.departemnt-content[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:20px}.btn-save[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:20px}.button-delete[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:160px}"]],data:{}});function V(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"div",[["class","pull-right g-button button-delete  btn-save m-t-15 m-r-10"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.deleteDepartment()&&e),e},null,null)),(t()(),e._32(1,null,["\n  ","\n"])),e._25(131072,s.j,[s.k,e.h])],null,function(t,n){t(n,1,0,e._33(n,1,0,e._22(n,2).transform("DELETE")))})}function Y(t){return e._34(0,[(t()(),e._10(0,0,null,null,4,"p",[["class","s-edit-position-title f7-f "]],null,null,null,null,null)),(t()(),e._32(1,null,["\n  ","\n  "])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._10(3,0,null,null,0,"span",[["class","bi-icon-close"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.closeDepartmentForm()&&e),e},null,null)),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._10(6,0,null,null,61,"div",[["class","departemnt-content"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(9,0,null,null,27,"div",[["class","s-contact-detail-input"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(11,0,null,null,9,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(13,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(14,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(17,0,null,null,2,"span",[["class","g-title-require"]],null,null,null,null,null)),(t()(),e._32(18,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(22,0,null,null,13,"div",[["class","se-input"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(24,0,null,null,3,"div",[["class","se-input-select"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(26,0,null,null,0,"span",[["class","font-selectbutton-soildclose hide"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(29,0,null,null,5,"input",[["class","show g-input-color g-input-box-shadow g-raduis2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,l){var i=!0,o=t.component;return"input"===n&&(i=!1!==e._22(t,30)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==e._22(t,30).onTouched()&&i),"compositionstart"===n&&(i=!1!==e._22(t,30)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e._22(t,30)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(o.localDepartmentInfo.name=l)&&i),i},null,null)),e._9(30,16384,null,0,r.d,[e.H,e.l,[2,r.a]],null,null),e._28(1024,null,r.l,function(t){return[t]},[r.d]),e._9(32,671744,null,0,r.q,[[8,null],[8,null],[8,null],[2,r.l]],{model:[0,"model"]},{update:"ngModelChange"}),e._28(2048,null,r.m,null,[r.q]),e._9(34,16384,null,0,r.n,[r.m],null,null),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(40,0,null,null,9,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(42,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(43,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(46,0,null,null,2,"span",[["class","g-title-require"]],null,null,null,null,null)),(t()(),e._32(47,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(51,0,null,null,2,"bi-dropdown",[],null,[[null,"outSelectChange"]],function(t,n,l){var e=!0;return"outSelectChange"===n&&(e=!1!==t.component.leaderChange(l)&&e),e},F.b,F.a)),e._9(52,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"],selectedOption:[1,"selectedOption"],inputDropdownObj:[2,"inputDropdownObj"]},{outSelectChange:"outSelectChange"}),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(56,0,null,null,6,"div",[["class","g-title"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(58,0,null,null,2,"span",[["class","g-title-desc"]],null,null,null,null,null)),(t()(),e._32(59,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(64,0,null,null,2,"bi-dropdown",[],null,null,null,F.b,F.a)),e._9(65,114688,null,0,T.a,[],{dropdownSettings:[0,"dropdownSettings"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._5(16777216,null,null,1,null,V)),e._9(71,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(74,0,null,null,2,"div",[["class","pull-right g-button button-upload  btn-save m-t-15 m-r-10"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.saveDepartmentInfo()&&e),e},null,null)),(t()(),e._32(75,null,["\n  ","\n"])),e._25(131072,s.j,[s.k,e.h])],function(t,n){var l=n.component;t(n,32,0,l.localDepartmentInfo.name),t(n,52,0,l.leaderDropdownSettings,l.leaderSelectArray,l.leaderDropdownObj),t(n,65,0,l.memberDropdownSettings),t(n,71,0,!l.isNew)},function(t,n){var l=n.component;t(n,1,0,e._33(n,1,0,e._22(n,2).transform(l.isNew?"NEW DEPARTMENT":"EDIT DEPARTMENT"))),t(n,14,0,e._33(n,14,0,e._22(n,15).transform("DEPARTMENT NAME"))),t(n,18,0,e._33(n,18,0,e._22(n,19).transform("required"))),t(n,29,0,e._22(n,34).ngClassUntouched,e._22(n,34).ngClassTouched,e._22(n,34).ngClassPristine,e._22(n,34).ngClassDirty,e._22(n,34).ngClassValid,e._22(n,34).ngClassInvalid,e._22(n,34).ngClassPending),t(n,43,0,e._33(n,43,0,e._22(n,44).transform("LEADER"))),t(n,47,0,e._33(n,47,0,e._22(n,48).transform("required"))),t(n,59,0,e._33(n,59,0,e._22(n,60).transform("DEPARTMENT MEMBERS"))),t(n,75,0,e._33(n,75,0,e._22(n,76).transform("SAVE")))})}var X=l("bfOx"),Z=l("8F77"),J=l("AzmM"),K=function(){function t(t,n,l,e,i,o){this.router=t,this.config=n,this.FileService=l,this.userStorage=e,this.d3Service=i,this.typeService=o,this.picW=34,this.picH=34,this.position={x:10,y:20},this.subordinate={x:10,y:44},this.assistance={x:10,y:68},this.department={x:10,y:92},this.remove={x:10,y:125},this.removeD={x:10,y:70},this.publicCon=[],this.structure=[],this.role={},this.role=this.userStorage.getUserRole(),this.initD3Configuration()}return t.prototype.initD3Configuration=function(){this.d3=this.d3Service.getInstance()},t.prototype.setStructure=function(t){this.structure=t},t.prototype.setPublicCon=function(t){this.publicCon=t},t.prototype.drawTopG=function(){this.publicCon.draw.append("g").attr("id","menu-group"),this.publicCon.draw.append("g").attr("id","line-group")},t.prototype.drawAssLine=function(t){var n=this.publicCon.draw.select("#line-group");n.lower();var l=t.x-25,e=t.y-this.publicCon.ass.assT-15,i=l,o=t.y+14;n.append("line").attr("x1",l).attr("x2",i).attr("y1",e).attr("y2",o).attr("stroke-width",1).attr("stroke","#7078F7"),n.append("line").attr("x1",l).attr("x2",t.x+2).attr("y1",o).attr("y2",o).attr("stroke-width",1).attr("stroke","#7078F7")},t.prototype.drawStartLine=function(t,n){var l=this.publicCon.draw.select("#line-group");l.lower();var e=0,i=0,o=0;if(t.depth!==parseInt(t.p_level)){var r=1;for(var s in this.structure)this.structure[s].id===t.parent_id&&(r=parseInt(this.structure[s].p_level));i=(this.publicCon.local.perX-this.publicCon[t.s_type].width)/2,e=t.x-this.publicCon[t.s_type].width*(parseInt(t.p_level)-r-1)-i*(2*(parseInt(t.p_level)-r)-1),o=t.x+1}else o=(e=t.x+1)-(i=(this.publicCon.local.perX-this.publicCon[t.s_type].width)/2)-1;var u=this.publicCon[t.s_type].height/2+t.y;"d"==t.s_type&&(u-=1),l.append("line").attr("x1",e).attr("x2",o).attr("y1",Math.floor(u)).attr("y2",Math.floor(u)).attr("stroke-width",1).attr("stroke","#7078F7")},t.prototype.drawEndLine=function(t){if(t.nodes.length>0){var n=this.publicCon.draw.select("#line-group"),l=this.publicCon[t.s_type].width+t.x,e=this.publicCon[t.s_type].height/2+t.y,i=l+(this.publicCon.local.perX-this.publicCon[t.s_type].width)/2;n.append("line").attr("x1",l).attr("x2",i).attr("y1",Math.floor(e)).attr("y2",Math.floor(e)).attr("stroke-width",1).attr("stroke","#7078F7")}},t.prototype.drawVerticalLine=function(t,n){var l=this.publicCon.draw.select("#line-group");l.lower();var e=this.publicCon[t.s_type].width+t.x+(this.publicCon.local.perX-this.publicCon[t.s_type].width)/2,i=n.min-1,o=e,r=n.max-1;l.append("line").attr("class","vertical-line").attr("x1",e).attr("x2",o).attr("y1",i).attr("y2",r).attr("stroke-width",1).attr("stroke","#7078F7")},t.prototype.drawRec=function(t,n,l,e,i,o){var r,s,u=this,a=this.publicCon.draw;"d"==t.s_type?(r=t.did,s="Rectangle-6-d-"+t.did):(r=t.id,s="Rectangle-6-"+t.id);var p=a.append("g").attr("id","rec-ps-"+r).attr("stroke","none").attr("stroke-width",1).attr("fill","none").attr("fill-rule","evenodd").on("mouseenter",function(){if("d"===t.s_type&&t.profile)for(var n in t.profile)p.select("#profile-image-"+t.did+"-"+n).raise();"u"===t.s_type&&p.select("#user-profile-"+t.id).raise(),p.select("#"+s).style("display","block"),p.select("#"+s).style("display","block"),p.select("#circle-"+t.id).style("display","block"),p.select("#circle-d-"+t.did).style("display","block")}).on("mouseleave",function(){"d"===t.s_type?(p.selectAll("#"+s).style("display","none"),p.selectAll("#circle-d-"+t.did).style("display","none")):-1!==u.publicCon.draw.select("#menu-group").select("#menu-"+t.id).attr("style").indexOf("none")&&(p.selectAll("#"+s).style("display","none"),p.selectAll("#circle-"+t.id).style("display","none"))});if("d"==t.s_type&&p.attr("style","cursor:pointer").on("click",function(){u.d3.event.stopPropagation(),i.emit(t.did)}),p.lower(),"u"===t.s_type||"p"===t.s_type){(f=p.append("defs")).append("pattern").attr("id","pattern-"+t.id).attr("patternUnits","objectBoundingBox").attr("x","-1.26882631e-14%").attr("width","100%").attr("height","100%").append("use").attr("xlink:href",this.router.url+"#image-"+t.id).attr("transform","scale(0.265625,0.265625)"),f.append("image").attr("id","image-"+t.id).attr("width","128").attr("height","128").attr("xlink:href",t.profile?this.config.resourceDomain+this.FileService.getImagePath(36,t.profile):""),f.append("rect").attr("id","path-3-"+t.id).attr("rx",2).attr("x",t.x).attr("y",t.y).attr("width",140).attr("height",148),(_=f.append("filter").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").attr("filterUnits","objectBoundingBox").attr("id","filter-4-"+t.id)).append("feOffset").attr("dx",0).attr("dy",4).attr("in","SourceAlpha").attr("result","shadowOffsetOuter1"),_.append("feGaussianBlur").attr("stdDeviation",3).attr("in","shadowOffsetOuter1").attr("result","shadowBlurOuter1"),_.append("feGaussianBlur").attr("values","0 0 0 0 0.503082483   0 0 0 0 0.503082483   0 0 0 0 0.503082483  0 0 0 0.636435688 0").attr("type","matrix").attr("in","shadowBlurOuter1");var c=p.append("g").attr("transform","translate(-839.000000, -379.000000)").append("g").attr("transform","translate(800.000000, 101.000000)"),d=((g=c.append("g").attr("transform","translate(40.000000, 279.000000)")).append("rect").attr("width",this.publicCon[t.s_type].width).attr("height",this.publicCon[t.s_type].height).attr("rx",2).attr("fill","#7078F7").attr("x",t.x).attr("y",t.y),g.append("text").attr("fill","#D2D5F7").attr("font-size","12px").attr("font-family","LatoRegular").attr("font-weight","normal").attr("letter-spacing",-.5));if(d.append("tspan").attr("x",t.x+38).attr("y",t.y+31).text("0"===t.is_ass?t.title_name?t.title_name+" "+t.p_name:t.p_name:t.title_name+"\u52a9\u7406"),g.append("text").attr("fill","#ABABAB").attr("font-size","12px").attr("font-family","LatoLight").attr("font-style","italic").attr("font-weight","300").append("tspan").attr("x",t.x+42+d.node().getBBox().width).attr("y",t.y+31).text("L"+("1"===t.is_ass?t.p_level+" -1":t.p_level)),"u"===t.s_type)g.append("text").attr("fill","#FFFFFF").attr("font-size","12px").attr("font-family","LatoBold").attr("font-weight","bold").attr("letter-spacing",-.5).append("tspan").attr("x",t.x+38).attr("y",t.y+15).text(t.work_name),g.append("rect").attr("id","user-profile-"+t.id).attr("stroke","#979797").attr("stroke-width",.2).attr("fill","url("+this.router.url+"#pattern-"+t.id+")").attr("x",t.x+0).attr("y",t.y+0).attr("width",34).attr("height",34).attr("rx",2).attr("style","cursor:pointer").on("click",function(){o&&o(t.uuid)});else{var h=t.p_name.substring(0,1);/^[a-z]$/.test(h)&&!/^[A-Z]$/.test(h)&&(h=h.toUpperCase())}}else if("d"===t.s_type){var f,_,g;if((f=p.append("defs")).append("pattern").attr("id","pattern-"+t.did).attr("patternUnits","objectBoundingBox").attr("x","-1.26882631e-14%").attr("width","100%").attr("height","100%").append("use").attr("xlink:href",this.router.url+"#image-"+t.did).attr("transform","scale(0.265625,0.265625)"),f.append("rect").attr("id","path-3-"+t.did).attr("rx",2).attr("x",t.x).attr("y",t.y).attr("width",140).attr("height",88),(_=f.append("filter").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").attr("filterUnits","objectBoundingBox").attr("id","filter-4-"+t.did)).append("feOffset").attr("dx",0).attr("dy",4).attr("in","SourceAlpha").attr("result","shadowOffsetOuter1"),_.append("feGaussianBlur").attr("stdDeviation",3).attr("in","shadowOffsetOuter1").attr("result","shadowBlurOuter1"),_.append("feGaussianBlur").attr("values","0 0 0 0 0.503082483   0 0 0 0 0.503082483   0 0 0 0 0.503082483  0 0 0 0.636435688 0").attr("type","matrix").attr("in","shadowBlurOuter1"),c=p.append("g").attr("transform","translate(-963.000000, -301.000000)").append("g").attr("transform","translate(360.000000, 101.000000)"),(g=c.append("g").attr("transform","translate(603.000000, 200.000000)")).append("rect").attr("fill","#7078F7").attr("x",t.x).attr("y",t.y).attr("width",this.publicCon[t.s_type].width).attr("height",this.publicCon[t.s_type].height).attr("rx",2),g.append("rect").attr("width",this.publicCon[t.s_type].width).attr("height",this.publicCon[t.s_type].height).attr("rx",2).attr("fill","#7078F7").attr("x",t.x).attr("y",t.y),g.append("text").attr("font-family","LatoRegular").attr("font-size",12).attr("font-weight","normal").attr("letter-spacing",-.5).attr("fill","#D2D5F7").append("tspan").attr("x",t.x+12).attr("y",t.y+30).text(t.num-1+" P"),g.append("text").attr("font-family","LatoBold").attr("font-size",12).attr("font-weight","bold").attr("fill","#FFFFFF").append("tspan").attr("x",t.x+12).attr("y",t.y+16).text(t.name),this.typeService.getDataLength(t.staff))for(var m=this.typeService.getDataLength(t.staff)>5?5:this.typeService.getDataLength(t.staff),v=a.append("defs"),y=function(n){v.append("pattern").attr("id","pattern-"+t.did+"-"+n).attr("patternUnits","objectBoundingBox").attr("x","-1.26882631e-14%").attr("width","100%").attr("height","100%").append("use").attr("xlink:href",b.router.url+"#image-"+t.did+"-"+n).attr("transform","scale(0.1875, 0.1875)"),v.append("image").attr("id","image-"+t.did+"-"+n).attr("width","128").attr("height","128").attr("xlink:href",b.config.resourceDomain+b.FileService.getImagePath(24,t.staff[n].profile)),g.append("rect").attr("id","profile-image-"+t.did+"-"+n).attr("stroke","#979797").attr("stroke-width",.2).attr("title",t.staff.work_name).attr("width",24).attr("height",24).attr("style","cursor:pointer").attr("fill","url("+b.router.url+"#pattern-"+t.did+"-"+n+")").attr("rx",2).attr("x",function(){return t.x+(0==n?10:10+34*n)}).attr("y",t.y+35).on("click",function(){}).on("mouseenter",function(){}).on("mouseleave",function(){})},b=this,x=0;x<m;x++)y(x)}1===parseInt(t.is_ass)?this.drawAssLine(t):(1!=t.depth&&this.drawStartLine(t,l),this.drawEndLine(t),n.hasOwnProperty(t.id)&&this.drawVerticalLine(t,n[t.id])),(this.role.isCeo||this.role.isHr||this.role.isStaffMa)&&this.drawCircle(p,t),"u"===t.s_type||"p"===t.s_type?this.drawMenu(t,e):"d"===t.s_type&&this.drawMenu(t,e)},t.prototype.drawCircle=function(t,n){var l,e=this,i=t.select("g").attr("transform","translate(-359.000000, -325.000000)").raise().select("g").attr("transform","translate(360.000000, 101.000000)").select("g").attr("transform","translate(0.000000, 225.000000)"),o="Rectangle-6-"+n.id;"d"==n.s_type&&(o="Rectangle-6-d-"+n.did),i.append("rect").attr("id",o).attr("width",this.publicCon[n.s_type].width).attr("height",this.publicCon[n.s_type].height).attr("rx",2).attr("fill","#FFFFFF").attr("x",n.x).attr("y",n.y).attr("opacity","0.2").style("display","none"),"d"!=n.s_type?((l=i.append("g").attr("transform","translate("+(n.x+178)+", "+(n.y+5)+")").attr("id","circle-"+n.id).attr("style","cursor:pointer").style("display","none").on("click",function(){var t=e.publicCon.draw.select("#menu-group").select("#menu-"+n.id);-1===t.attr("style").indexOf("none")?t.style("display","none"):t.style("display","block")})).append("circle").attr("fill","#7078F7").attr("x",n.x).attr("y",n.y).attr("width",this.picW).attr("height",this.picH).attr("cx",12).attr("cy",12).attr("r",6),l.append("path").attr("d","M11.2,12.8 L11.2,15.2 C11.2,15.6424 11.5584,16 12,16 C12.4416,16 12.8,15.6424 12.8,15.2 L12.8,12.8 L15.2,12.8 C15.6424,12.8 16,12.4424 16,12 C16,11.5576 15.6424,11.2 15.2,11.2 L12.8,11.2 L12.8,8.8 C12.8,8.3584 12.4416,8 12,8 C11.5584,8 11.2,8.3584 11.2,8.8 L11.2,11.2 L8.8,11.2 C8.3584,11.2 8,11.5576 8,12 C8,12.4424 8.3584,12.8 8.8,12.8 L11.2,12.8 Z").attr("stroke","none").attr("fill","#FFFFFF")):((l=i.append("g").attr("transform","translate("+(n.x+178)+", "+(n.y+20)+")").attr("id","circle-d-"+n.did).attr("style","cursor:pointer").style("display","none").on("click",function(){var t=e.publicCon.draw.select("#menu-group").select("#menu-"+n.did),l=e.d3.event;l&&l.stopPropagation(),-1===t.attr("style").indexOf("none")?t.style("display","none"):t.style("display","block")})).append("circle").attr("fill","#7078F7").attr("x",n.x).attr("y",n.y).attr("width",this.picW).attr("height",this.picH).attr("cx",12).attr("cy",12).attr("r",6),l.append("path").attr("d","M11.2,12.8 L11.2,15.2 C11.2,15.6424 11.5584,16 12,16 C12.4416,16 12.8,15.6424 12.8,15.2 L12.8,12.8 L15.2,12.8 C15.6424,12.8 16,12.4424 16,12 C16,11.5576 15.6424,11.2 15.2,11.2 L12.8,11.2 L12.8,8.8 C12.8,8.3584 12.4416,8 12,8 C11.5584,8 11.2,8.3584 11.2,8.8 L11.2,11.2 L8.8,11.2 C8.3584,11.2 8,11.5576 8,12 C8,12.4424 8.3584,12.8 8.8,12.8 L11.2,12.8 Z").attr("stroke","none").attr("fill","#FFFFFF"))},t.prototype.drawMenu=function(t,n){var l=this,e="d"==t.s_type?t.did:t.id,i=this.publicCon.draw.select("#menu-group"),o="Rectangle-6-"+t.id;"d"==t.s_type&&(o="Rectangle-6-d-"+t.did),i.raise();var r="d"==t.s_type?45:28,s=i.append("g").attr("id","menu-"+e).attr("data-step","menu-"+e).attr("class","structure-help").style("display","none").attr("transform","translate(120.000000,"+r+")").on("mouseleave",function(){l.publicCon.draw.select("#menu-group").select("#menu-"+t.id).style("display","none"),l.publicCon.draw.select("#menu-group").select("#menu-"+t.did).style("display","none"),l.publicCon.draw.selectAll("#"+o).style("display","none"),l.publicCon.draw.selectAll("#circle-"+t.id).style("display","none"),l.publicCon.draw.selectAll("#circle-d-"+t.did).style("display","none")}),u=s.append("g");if(u.append("use").attr("fill","black").attr("fill-opacity",1).attr("filter","url(#filter-4-"+e+")").attr("xlink:href",this.router.url+"#path-3-"+e),u.append("use").attr("fill","#ffffff").attr("fill-rule","evenodd").attr("xlink:href",this.router.url+"#path-3-"+e),s.append("rect").attr("id","Rectangle-11").attr("fill","#FFFFFF").attr("x",t.x+5).attr("y",t.y+6).attr("width",130).attr("height",20).attr("rx",2),"u"==t.s_type||"p"==t.s_type){var a=this.drawMenuList(s.append("g"),t.x+5,t.y+6,t.x+10,t.y+20,"Edit-the-position","position","Edit the position"),p=this.drawMenuList(s.append("g"),t.x+5,t.y+30,t.x+10,t.y+44,"New-subordinate","subordinate","New subordinate"),c=this.drawMenuList(s.append("g"),t.x+5,t.y+54,t.x+10,t.y+68,"New-assistance","assistance","New assistance"),d=this.drawMenuList(s.append("g"),t.x+5,t.y+78,t.x+10,t.y+92,"New-department","department","New department"),h=this.drawMenuList(s.append("g"),t.x+5,t.y+111,t.x+10,t.y+125,"Remove-the-position","remove","Remove the position");a.attr("id","Edit-the-position").attr("style","cursor:pointer").on("mouseenter",function(){l.drawEventMenu(t,"Edit-the-position")}).attr("style","cursor:pointer").on("click",function(){n.emit({type:"position",data:t})}),"1"!==t.is_ass?(p.on("mouseenter",function(){l.drawEventMenu(t,"New-subordinate")}).attr("style","cursor:pointer").on("click",function(){n.emit({type:"subordinate",data:t})}),""==this.publicCon.departmentId||this.publicCon.departmentId==t.did?c.on("mouseenter",function(){l.drawEventMenu(t,"New-assistance")}).attr("style","cursor:pointer").on("click",function(){n.emit({type:"assistance",data:t})}):c.select("text").attr("opacity",".5").attr("cursor","not-allowed"),""!=this.publicCon.departmentId&&"0"!=this.publicCon.departmentId?d.select("text").attr("opacity",".5").attr("cursor","not-allowed"):d.on("mouseenter",function(){l.drawEventMenu(t,"New-department")}).attr("style","cursor:pointer").on("click",function(){n.emit({type:"department",data:t})})):(d.select("text").attr("opacity",".5"),c.select("text").attr("opacity",".5"),p.select("text").attr("opacity",".5")),s.append("path").attr("d","M"+(t.x+10)+","+(t.y+108)+" L"+(t.x+130)+","+(t.y+108)).attr("id","line-"+t.id).attr("stroke","#E2E2E9").attr("stroke-width",.5).attr("stroke-linecap","square"),"1"===t.p_level&&"0"===t.is_ass?(h.select("rect").attr("opacity","0.5").attr("cursor","not-allowed"),h.select("text").attr("fill","#E2E2E9")):(h.select("text").attr("fill","#EE1919").attr("style","cursor:pointer"),h.attr("style","cursor:pointer").on("mouseenter",function(){l.drawEventMenu(t,"Remove-the-position")}).on("click",function(){n.emit({type:"remove",data:t})}))}else"d"==t.s_type&&((a=this.drawMenuList(s.append("g"),t.x+5,t.y+6,t.x+10,t.y+20,"Edit-the-department","edit-department","Edit the department")).attr("id","Edit-the-department").attr("style","cursor:pointer").on("mouseenter",function(){l.drawEventMenu(t,"Edit-the-department")}).attr("style","cursor:pointer").on("click",function(){n.emit({type:"edit-department",data:t})}),(p=this.drawMenuList(s.append("g"),t.x+5,t.y+30,t.x+10,t.y+44,"Enter-department","enter-department","Enter department")).on("mouseenter",function(){l.drawEventMenu(t,"Enter-department")}).attr("style","cursor:pointer").on("click",function(){event&&event.stopPropagation(),n.emit({type:"enter-department",data:t})}),(h=this.drawMenuList(s.append("g"),t.x+5,t.y+111,t.x+10,t.y+70,"Remove-department","remove-department","Remove department")).select("text").attr("fill","#EE1919").attr("style","cursor:pointer"),h.attr("style","cursor:pointer").on("mouseenter",function(){l.drawEventMenu(t,"Remove-department")}).on("click",function(){n.emit({type:"remove-department",data:t})}));return s},t.prototype.drawMenuList=function(t,n,l,e,i,o,r,s){return t.attr("id",o),t.append("rect").attr("width",130).attr("height",20).attr("x",n).attr("y",l).attr("fill","transparent"),t.append("text").attr("font-family","LatoRegular").attr("font-size",12).attr("font-weight","normal").attr("fill","#9193AB").append("tspan").attr("x",e).attr("y",i).text(s),t},t.prototype.drawEventMenu=function(t,n){var l;(l="d"==t.s_type?this.publicCon.draw.select("#menu-group").select("#menu-"+t.did):this.publicCon.draw.select("#menu-group").select("#menu-"+t.id)).select("#Edit-the-position").select("text").attr("fill","#9193AB"),l.select("#New-subordinate").select("text").attr("fill","#9193AB"),l.select("#New-assistance").select("text").attr("fill","#9193AB"),l.select("#New-department").select("text").attr("fill","#9193AB"),l.select("#Edit-the-department").select("text").attr("fill","#9193AB"),l.select("#Enter-department").select("text").attr("fill","#9193AB"),l.select("#Remove-department").select("text").attr("fill","#EE1919"),"1"===t.p_level&&"0"===t.is_ass?l.select("#Remove-the-position").select("text").attr("fill","#E2E2E9"):l.select("#Remove-the-position").select("text").attr("fill","#EE1919");var e=0,i=0;"Edit-the-position"===n?(e=t.x+this.position.x,i=t.y+this.position.y):"New-subordinate"===n?(e=t.x+this.subordinate.x,i=t.y+this.subordinate.y):"New-assistance"===n?(e=t.x+this.assistance.x,i=t.y+this.assistance.y):"New-department"===n?(e=t.x+this.department.x,i=t.y+this.department.y):"Remove-the-position"===n?(e=t.x+this.remove.x,i=t.y+this.remove.y):"Edit-the-department"===n?(e=t.x+this.position.x,i=t.y+this.position.y):"Enter-department"===n?(e=t.x+this.subordinate.x,i=t.y+this.subordinate.y):"Remove-department"===n&&(e=t.x+this.removeD.x,i=t.y+this.removeD.y),n?(l.select("#Rectangle-11").attr("fill","#7078F7").attr("x",e-5).attr("y",i-14),l.select("#"+n).select("text").attr("fill","#FFFFFF")):(l.select("#Rectangle-11").attr("fill","#FFFFFF"),l.select("#"+n).select("text").attr("fill","#FFFFFF"))},t}(),tt=(l("DUFE"),l("gsju")),nt=function(){function t(t,n,l,i,o,r,s,u){this.router=t,this.renderer=n,this.activatedRoute=l,this.draw=i,this.dialog=o,this.typeService=r,this.dialogService=s,this.D3Service=u,this.structureType="Company",this.marginLeft="0",this.depthGroup=[],this.node=[],this.departmentHeaderInfo=[],this.drawCount=0,this.allObj={},this.publicCon2={departmentId:"",draw:{},winW:0,winH:0,u:{width:202,userLineW:60,height:34},d:{width:202,height:65,comW:50},p:{width:202,userLineW:60,height:34},ass:{assT:26,assL:40},local:{betweenY:22,perX:302,cPosX:0,cPosY:150,otherX:100,otherY:20,leftButtonY:0}},this.maxLv=0,this.minLv=1e3,this.lvLineHigh=[],this.structure=[],this.outEditStructure=new e.o,this.outEditDepartment=new e.o}return Object.defineProperty(t.prototype,"setCompanyId",{set:function(t){this.companyId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setDepartmentId",{set:function(t){this.departmentId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStructureInfo",{set:function(t){var n,l=[],e=this.typeService.clone(t.s),i=this.typeService.clone(t.d),o="0"==this.departmentId||"undefined"==typeof this.departmentId;if(o){for(var r in n="0",e)if(e[r].parent_id==n){this.topParent=e[r];break}}else{for(var s in i)if(i[s].did==this.departmentId){n=i[s].parent_id;break}for(var r in e)if(e[r].id==n){this.topParent=e[r],l.push(e[r]);break}}for(var r in e)e[r].did==this.departmentId&&l.push(e[r]);if(o)for(var s in i){var u=i[s];t:for(var r in l)if(""!==l[r].id&&l[r].id==u.parent_id){var a=i[s];a.p_level=(parseInt(l[r].p_level)+1).toString(),a.s_type="d",l.push(a);break t}}this.topParent&&(this.allObj=l,this.initD3Configuration(),this.setSvg(),this.drawing())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setMarginLeft",{set:function(t){this.marginLeft=t},enumerable:!0,configurable:!0}),t.prototype.initD3Configuration=function(){this.d3=this.D3Service.getInstance()},t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){this.typeService.getObjLength(this.allObj)},t.prototype.drawing=function(){for(var t in this.drawCount++,this.publicCon2.departmentId=this.departmentId,this.publicCon2.draw.selectAll("*").remove(),this.publicCon2.winH=parseInt(this.moveElement.nativeElement.offsetHeight),this.publicCon2.winW=parseInt(this.moveElement.nativeElement.offsetWidth),this.structure=[],this.depthGroup=[],this.node=[],this.maxLv=0,this.minLv=1e3,this.allObj){var n=this.allObj[t];n.x=this.publicCon2.local.perX*(parseInt(n.p_level)-1),n.y=this.publicCon2.local.cPosY,n.nodes=[],n.ass=[],n.depth=0,n.width=parseInt(this.publicCon2[n.s_type].height),this.structure[t]=n,this.minLv>parseInt(n.p_level)&&(this.minLv=parseInt(n.p_level))}this.setDepthAndNodes(this.topParent.parent_id),this.setNodesDepth(this.node),this.setStructure(),this.setAllBlock(),this.drawStructure()},t.prototype.reDraw=function(){this.publicCon2.draw.selectAll("*").remove(),this.drawing()},t.prototype.setDepthAndNodes=function(t){for(var n in t||(t="0"),this.structure){var l=this.structure[n];if(l.parent_id==t){if(t==this.topParent.parent_id)l.depth=1,l.x=this.publicCon2.local.perX*(parseInt(l.depth)-1),this.node=this.structure[n];else if("1"==this.structure[n].is_ass)for(var e in this.structure)t===this.structure[e].id&&(l.depth=this.structure[e].depth,l.x=this.publicCon2.local.perX*(parseInt(l.p_level)-this.minLv),this.structure[e].ass.push(this.structure[n]));else for(var e in this.structure)t===this.structure[e].id&&(l.depth=this.structure[e].depth+1,l.x=this.publicCon2.local.perX*(parseInt(l.p_level)-this.minLv),this.structure[e].nodes.push(this.structure[n]));this.maxLv<l.depth&&(this.maxLv=l.depth),"u"!==l.s_type&&"p"!==l.s_type||this.setDepthAndNodes(l.id)}}},t.prototype.keysrt=function(t){return function(n,l){var e=parseInt(n[t]),i=parseInt(l[t]);return i<e?1:i>e?-1:0}},t.prototype.setStructure=function(){for(var t in this.structure=[],this.depthGroup){var n=this.depthGroup[t].nodes;for(var l in n)if(this.structure.push(n[l]),n[l].ass&&n[l].ass.length>0)for(var e in n[l].ass)this.structure.push(n[l].ass[e])}},t.prototype.setNodesDepth=function(t){if("object"!=typeof this.depthGroup[t.depth]&&(this.depthGroup[t.depth]=[],this.depthGroup[t.depth].nodes=[],this.depthGroup[t.depth].nodeGroups=[]),this.depthGroup[t.depth].nodes[this.depthGroup[t.depth].nodes.length]=t,1===t.depth)this.depthGroup[t.depth].nodeGroups[0]=[],this.depthGroup[t.depth].nodeGroups[0][0]=t,t.nodeGroupId=0,t.nodeOrderId=0;else if(0===this.depthGroup[t.depth].nodeGroups.length)this.depthGroup[t.depth].nodeGroups[0]=[],this.depthGroup[t.depth].nodeGroups[0][0]=t,t.nodeGroupId=0,t.nodeOrderId=0;else{var n=this.depthGroup[t.depth].nodeGroups.length,l=this.depthGroup[t.depth].nodeGroups[n-1].length;t.parent_id==this.depthGroup[t.depth].nodeGroups[n-1][l-1].parent_id?(this.depthGroup[t.depth].nodeGroups[n-1][l]=t,t.nodeGroupId=n-1,t.nodeOrderId=l):("object"!=typeof this.depthGroup[t.depth].nodeGroups[n]&&(this.depthGroup[t.depth].nodeGroups[n]=[]),this.depthGroup[t.depth].nodeGroups[n][l=this.depthGroup[t.depth].nodeGroups[n].length]=t,t.nodeGroupId=n,t.nodeOrderId=l)}if(t.nodes&&0!=t.nodes.length)for(var e=0;e<t.nodes.length;e++)this.setNodesDepth(t.nodes[e])},t.prototype.setAssBlock=function(t){for(var n=0,l=0;l<t.ass.length;l++)t.ass[l].y=0===l?t.y+this.publicCon2.local.betweenY+this.publicCon2[t.s_type].height:t.ass[l-1].y+t.ass[l-1].width+this.publicCon2.local.betweenY,t.ass[l].y>n&&(n=t.ass[l].y),t.ass[l].x=t.x+this.publicCon2.ass.assL;return t.width<n-t.y+this.publicCon2[t.s_type].height&&(t.width=n-t.y+this.publicCon2[t.s_type].height),t},t.prototype.setNodeBlock=function(t,n){for(var l=0,e=0;e<t.nodes.length;e++)t.nodes[e].y>l&&(l=t.nodes[e].y);return t.width<l-t.y+this.publicCon2[t.s_type].height*(t.nodes.length-1)&&this.depthGroup[n].nodes.length>1&&(t.width=l-t.y+this.publicCon2[t.s_type].height),t},t.prototype.setAllBlock=function(){for(var t=this.maxLv;t>=1;t--){var n=this.depthGroup[t].nodes;if(n.sort(this.keysrt("p_level")),t===this.maxLv)for(var l=0;l<n.length;l++)n[l].y=0==l?150:n[l-1].y+n[l-1].width+this.publicCon2.local.betweenY,n[l].ass.length>0&&(n[l]=this.setAssBlock(n[l])),n[l].nodes.length>1&&(n[l]=this.setNodeBlock(n[l],t));else{for(l=0;l<n.length;l++)if(0!==n[l].nodes.length){n[l].nodes.sort(this.keysrt("y"));var e=n[l].nodes[0].y+this.getGroupWidthByNode(n[l].nodes[0])/2;e-=n[l].width/2,1===n[l].nodes.length?(n[l].y=n[l].nodes[0].y,n[l].width=n[l].nodes[0].width):n[l].y=e}for(l=0;l<n.length;l++)n[l].hasOwnProperty("y")||this.setLeftByDepthNode(n,l,"LTR"),n[l].ass.length>0&&(n[l]=this.setAssBlock(n[l])),n[l].nodes.length>1&&(n[l]=this.setNodeBlock(n[l],t));for(l=1;l<n.length;l++){var i=this.publicCon2.local.betweenY-(n[l].y-n[l-1].y-n[l-1].width);if(i>0)for(var o=l;o<n.length;o++)this.amendNodeLeft(n[o],i);n[l].ass.length>0&&(n[l]=this.setAssBlock(n[l])),n[l].nodes.length>1&&(n[l]=this.setNodeBlock(n[l],t))}}}this.setDepthGroupWidth()},t.prototype.amendNodeLeft=function(t,n){if(t.y=t.y+n,0!=t.ass.length)for(var l=0;l<t.ass.length;l++)t.ass[l].y=t.ass[l].y+n;if(0!==t.nodes.length)for(l=0;l<t.nodes.length;l++)this.amendNodeLeft(t.nodes[l],n)},t.prototype.setLeftByDepthNode=function(t,n,l){if("LTR"!==l||n!==t.length-1)if("RTL"!==l||0!==n){var e=0;if("LTR"===l){for(var i=n+1;i<t.length;i++)if(0!==t[i].y){e=i;break}if(0===e)return void this.setLeftByDepthNode(t,n,"RTL");for(var o=e-1;o>=n;o--)t[o].y=t[o+1].y-this.publicCon2.local.betweenY-this.publicCon2[t[o].s_type].height}if("RTL"===l){for(i=n-1;i>=0;i--)if(0!==t[i].y){e=i;break}if(0===e)return void this.setLeftByDepthNode(t,n,"LTR");for(o=e+1;o<=n;o--)t[o].y=t[o-1].y+this.publicCon2.local.betweenY+this.publicCon2[t[o-1].s_type].height}}else this.setLeftByDepthNode(t,n,"LTR");else this.setLeftByDepthNode(t,n,"RTL")},t.prototype.getGroupWidthByNode=function(t){var n=this.depthGroup[t.depth].nodeGroups[t.nodeGroupId];return n.sort(this.keysrt("y")),n[n.length-1].y-n[0].y+n[n.length-1].width},t.prototype.setDepthGroupWidth=function(){for(var t=1;t<=this.maxLv;t++)for(var n=this.depthGroup[t].nodeGroups,l=0;l<n.length;l++)n[l].width=this.getGroupWidthByNode(n[l][0])},t.prototype.drawStructure=function(){var t,n,l=this,e=[],i=[],o=[],r={min:0,max:0},s=0;for(var u in this.structure){var a=this.structure[u].y+this.publicCon2[this.structure[u].s_type].height;"c"!=this.structure[u].s_type&&"d"!=this.structure[u].s_type||(this.structure[u].y=this.structure[u].y-14,a-=14),this.structure[u].downY=a}for(var u in this.draw.setPublicCon(this.publicCon2),this.draw.setStructure(this.structure),this.draw.drawTopG(),this.lvLineHigh=[],this.structure){for(var p in this.structure)this.structure[p].parent_id===this.structure[u].id&&"1"!==this.structure[p].is_ass&&(e.push(this.structure[p].y),i.push(this.structure[p].y+this.publicCon2[this.structure[p].s_type].height/2),o.push(this.structure[p].downY));var c=0;if(e.length>0){if(Math.max.apply(0,o),c=Math.min.apply(0,e),r.max=Math.max.apply(0,i),r.min=Math.min.apply(0,i),e.length>1&&this.structure[u].y>c){var d=[];for(var p in this.structure)this.structure[p].parent_id===this.structure[u].id&&"1"!==this.structure[p].is_ass&&d.push(this.structure[p].y+this.publicCon2[this.structure[p].s_type].height/2);r.max=Math.max.apply(0,d),r.min=Math.min.apply(0,d)}this.lvLineHigh[this.structure[u].id]=this.typeService.clone(r)}e=[],o=[],i=[],r={}}var h,f=0;for(var _ in this.structure)this.structure[_].x>=f&&(f=this.structure[_].x,n=this.structure[_]);for(var u in(h=n.x+this.publicCon2[n.s_type].width)<1e3?h=1e3:h+=(this.publicCon2.winW-1e3)/2,this.structure)this.structure[u].y>s&&(s=this.structure[u].y,t=this.structure[u].s_type),this.draw.drawRec(this.structure[u],this.lvLineHigh,this.minLv,this.outEditStructure,this.outEditDepartment,function(t){l.dialog.open(tt.a,{width:"380px",height:"448px",data:{id:t}})});s+=this.publicCon2[t].height,this.drawingH.nativeElement.style.width=h+140+"px",this.drawingH.nativeElement.style.height=s+148+"px"},t.prototype.quitStructure=function(){},t.prototype.quit=function(){this.router.navigate(["user/index"])},t.prototype.setSvg=function(){this.d3.select("#drawing").selectAll("*").remove(),this.publicCon2.draw=this.d3.select("#drawing").append("svg").attr("width","120%").attr("height","140%").attr("x",0).attr("y",0)},t.prototype.moveToRight=function(t){var n,l=this,e=this.drawingH.nativeElement.offsetLeft,i=this.drawingH.nativeElement.scrollWidth,o=this.moveElement.nativeElement.offsetWidth,r=document.body.clientWidth>800?200:300,s=document.body.clientWidth>800?250:80;if(this.flag)return!1;if("left"==t){if((n=e+s)>=s)return;this.flag=!0,setTimeout(function(){l.flag=!1},300),this.drawingH.nativeElement.style.left=n+"px"}else if("right"==t){if(n=e-s,o+Math.abs(n)-r>i)return;this.flag=!0,setTimeout(function(){l.flag=!1},300),this.drawingH.nativeElement.style.left=n+"px"}},t.prototype.startMove=function(t){var n=this;this.time1=setInterval(function(){n.moveToRight(t)},30)},t.prototype.endMove=function(t){clearInterval(this.time1)},t.prototype.backToMain=function(){this.router.navigate(["/structure/"])},t}(),lt=l("8tOD"),et=e._8({encapsulation:0,styles:[[".s-enirety-structure[_ngcontent-%COMP%]{height:100%;width:calc(100vw - 250px);position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-overflow-style:none;overflow-y:auto;overflow-x:hidden;margin-left:20px;top:0;left:60px}.but-page[_ngcontent-%COMP%]{width:60px;height:100%;background-color:rgba(230,230,230,.5);position:absolute;z-index:1;cursor:pointer;-webkit-transition:.2s linear;transition:.2s linear}.but-page[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.but-page.page-left[_ngcontent-%COMP%]{left:0}.but-page.page-right[_ngcontent-%COMP%]{right:0}.but-page[_ngcontent-%COMP%]   .but-page-next.bi-icon-go-left-hover[_ngcontent-%COMP%], .but-page[_ngcontent-%COMP%]   .but-page-prev.bi-icon-go-left-hover[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.but-page[_ngcontent-%COMP%]   .but-page-next.bi-icon-go-left-hover[_ngcontent-%COMP%]::before, .but-page[_ngcontent-%COMP%]   .but-page-prev.bi-icon-go-left-hover[_ngcontent-%COMP%]::before{color:#d8d8d8;font-size:40px}.but-page[_ngcontent-%COMP%]   .but-page-next.bi-icon-go-left-hover[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.draw-content[_ngcontent-%COMP%]{width:calc(100vw - 250px);height:calc(100vh - 140px);text-align:center;line-height:calc(100vh - 140px)}.draw-content[_ngcontent-%COMP%]   .drawing[_ngcontent-%COMP%]{position:absolute;left:0}.draw-content[_ngcontent-%COMP%]   .structure-back[_ngcontent-%COMP%]{position:absolute;z-index:2;left:80px;cursor:pointer;top:20px}@media screen and (max-width:700px){.s-enirety-structure[_ngcontent-%COMP%]{width:calc(100vw - 80px)!important}.draw-content[_ngcontent-%COMP%]{width:calc(100vw - 80px)!important;height:calc(100vh - 140px);text-align:center;line-height:calc(100vh - 140px);position:absolute;top:70px;left:0}.draw-content[_ngcontent-%COMP%]   .drawing[_ngcontent-%COMP%]{position:absolute;left:0}.draw-content[_ngcontent-%COMP%]   .but-page.page-right[_ngcontent-%COMP%]{right:-12px}}"]],data:{}});function it(t){return e._34(0,[(t()(),e._10(0,0,null,null,25,":svg:svg",[[":xml:space","preserve"],[":xmlns:xlink","http://www.w3.org/1999/xlink"],["class","structure-back"],["enable-background","new 0 0 103 32"],["height","32px"],["id","\u56fe\u5c42_1"],["version","1.1"],["viewBox","0 0 103 32"],["width","103px"],["x","0px"],["xmlns","http://www.w3.org/2000/svg"],["y","0px"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.backToMain()&&e),e},null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(2,0,null,null,1,":svg:title",[],null,null,null,null,null)),(t()(),e._32(-1,null,["Group 8"])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(5,0,null,null,1,":svg:desc",[],null,null,null,null,null)),(t()(),e._32(-1,null,["Created with Sketch."])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(8,0,null,null,16,":svg:g",[],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(10,0,null,null,0,":svg:path",[["d","M16,0h71c8.837,0,16,7.163,16,16l0,0c0,8.837-7.163,16-16,16H16C7.163,32,0,24.837,0,16l0,0\n  \t\tC0,7.163,7.163,0,16,0z"],["fill","#E6E6E6"],["id","Rectangle"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(12,0,null,null,0,":svg:path",[["d","M27.518,9.292l-6.531,5.548c-0.424,0.36-0.424,0.943-0.012,1.294l6.561,5.574\n  \t\tC27.754,21.892,28.061,22,28.351,22c0.29,0,0.58-0.092,0.815-0.292c0.453-0.385,0.453-1,0-1.385l-4.92-4.179\n  \t\tc-0.424-0.36-0.428-0.939,0-1.303l4.92-4.179c0.453-0.385,0.453-1,0-1.385C28.931,9.092,28.641,9,28.333,9\n  \t\tC28.043,9,27.754,9.092,27.518,9.292z"],["fill","#9193AB"],["id","Shape"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(14,0,null,null,9,":svg:g",[],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(16,0,null,null,0,":svg:path",[["d","M47.892,16.148c-0.266-0.35-0.617-0.616-1.048-0.794c0.294-0.191,0.539-0.432,0.729-0.719\n  \t\t\tc0.294-0.444,0.443-0.974,0.443-1.576c0-0.573-0.134-1.067-0.399-1.466c-0.258-0.389-0.577-0.7-0.944-0.92\n  \t\t\tc-0.18-0.112-0.396-0.197-0.64-0.251c-0.228-0.051-0.477-0.089-0.739-0.115c-0.259-0.024-0.521-0.04-0.785-0.044\n  \t\t\tc-0.26-0.005-0.502-0.007-0.727-0.007H39.75v10.922h5.286c0.545,0,1.038-0.093,1.464-0.276c0.422-0.182,0.783-0.427,1.073-0.727\n  \t\t\ts0.512-0.65,0.66-1.041c0.146-0.388,0.221-0.791,0.221-1.198C48.454,17.239,48.265,16.638,47.892,16.148z M46.567,17.891\n  \t\t\tc0,0.518-0.145,0.907-0.441,1.191c-0.299,0.287-0.713,0.427-1.265,0.427h-3.224v-3.105h2.917c0.274,0,0.542,0.025,0.798,0.075\n  \t\t\tc0.241,0.048,0.456,0.13,0.638,0.244c0.175,0.11,0.312,0.256,0.419,0.444C46.514,17.352,46.567,17.596,46.567,17.891z\n  \t\t\t M41.637,14.735v-2.813h2.523c0.29,0,0.566,0.017,0.822,0.049c0.234,0.03,0.441,0.096,0.615,0.195\n  \t\t\tc0.166,0.095,0.292,0.226,0.387,0.399c0.096,0.176,0.145,0.43,0.145,0.756c0,0.479-0.139,0.824-0.424,1.053\n  \t\t\tc-0.299,0.239-0.818,0.361-1.544,0.361H41.637z"],["fill","#9193AB"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(18,0,null,null,0,":svg:path",[["d","M66.639,16.983c-0.027,0.399-0.11,0.777-0.246,1.122c-0.134,0.338-0.32,0.632-0.554,0.874\n  \t\t\ts-0.515,0.434-0.837,0.57c-0.322,0.138-0.699,0.207-1.121,0.207c-0.578,0-1.08-0.108-1.491-0.322\n  \t\t\tc-0.411-0.215-0.752-0.506-1.015-0.867c-0.268-0.366-0.468-0.804-0.595-1.302c-0.131-0.508-0.197-1.053-0.197-1.623\n  \t\t\tc0-0.521,0.066-1.029,0.196-1.512c0.127-0.474,0.327-0.9,0.596-1.268c0.264-0.362,0.604-0.654,1.01-0.868\n  \t\t\tc0.403-0.213,0.901-0.322,1.481-0.322c0.674,0,1.262,0.171,1.746,0.51c0.481,0.336,0.785,0.83,0.928,1.51l0.042,0.199h1.878\n  \t\t\tl-0.04-0.285c-0.083-0.586-0.261-1.111-0.529-1.561c-0.27-0.45-0.61-0.831-1.015-1.131c-0.399-0.297-0.863-0.527-1.376-0.681\n  \t\t\tc-0.507-0.152-1.052-0.229-1.619-0.229c-0.832,0-1.582,0.153-2.229,0.454s-1.197,0.718-1.635,1.242\n  \t\t\tc-0.433,0.52-0.765,1.135-0.987,1.828c-0.221,0.689-0.333,1.435-0.333,2.215c0,0.778,0.104,1.519,0.311,2.204\n  \t\t\tc0.208,0.69,0.525,1.299,0.943,1.808c0.422,0.515,0.957,0.924,1.593,1.216c0.633,0.291,1.38,0.438,2.221,0.438\n  \t\t\tc1.393,0,2.511-0.392,3.325-1.163c0.81-0.77,1.292-1.853,1.435-3.222l0.028-0.275h-1.897L66.639,16.983z"],["fill","#9193AB"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(20,0,null,null,0,":svg:polygon",[["fill","#9193AB"],["points","74.4,14.737 79.086,10.254 76.564,10.254 71.633,15.104 71.633,10.254 69.746,10.254 \n  \t\t\t69.746,21.177 71.633,21.177 71.633,17.386 73.082,16.034 76.757,21.177 79.132,21.177 \t\t"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(22,0,null,null,0,":svg:path",[["d","M54.534,10.254H52.66l-4.253,10.922h1.956l1.168-3.139h4.06l1.139,3.139h2.073l-4.206-10.763\n  \t\t\tL54.534,10.254z M54.972,16.37h-2.82l1.422-3.914L54.972,16.37z"],["fill","#9193AB"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "]))],null,null)}function ot(t){return e._34(0,[e._30(402653184,1,{moveElement:0}),e._30(402653184,2,{drawingH:0}),(t()(),e._10(2,0,null,null,21,"div",[["class","pull-left draw-content g-relative"],["data-step","4"],["id","step_s_4"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(4,0,[["moveRightBut",1]],null,3,"div",[["class","but-page page-left"]],null,[[null,"mousedown"],[null,"mouseup"],[null,"click"]],function(t,n,l){var e=!0,i=t.component;return"mousedown"===n&&(e=!1!==i.startMove("left")&&e),"mouseup"===n&&(e=!1!==i.endMove("left")&&e),"click"===n&&(e=!1!==i.moveToRight("left")&&e),e},null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(6,0,null,null,0,"span",[["class","but-page-prev bi-icon-go-left-hover"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._5(16777216,null,null,1,null,it)),e._9(10,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(13,0,[[1,0],["moveElement",1]],null,4,"div",[["class","s-enirety-structure"],["id","drawing-wrap"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(15,0,[[2,0],["drawingH",1]],null,1,"div",[["class","drawing g-transition-2"],["id","drawing"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(19,0,[["moveLeftBut",1]],null,3,"div",[["class","but-page page-right"]],null,[[null,"mousedown"],[null,"mouseup"],[null,"click"]],function(t,n,l){var e=!0,i=t.component;return"mousedown"===n&&(e=!1!==i.startMove("right")&&e),"mouseup"===n&&(e=!1!==i.endMove("right")&&e),"click"===n&&(e=!1!==i.moveToRight("right")&&e),e},null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(21,0,null,null,0,"span",[["class","but-page-next bi-icon-go-left-hover"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"]))],function(t,n){t(n,10,0,n.component.departmentId)},null)}var rt=l("DbaW"),st=function(){function t(t,n,l){this.api=t,this.router=n,this.userStorage=l,this.departmentList=[],this.mainArr=[],this.pendingArr=[],this.staffByDeptList=[],this.outOpenPositionForm=new e.o,this.outOpenStaffForm=new e.o,this.outClickPosition=new e.o,this.outEditDepartment=new e.o,this.role={},this.companyId=this.userStorage.getCurrentCid(),this.role=this.userStorage.getUserRole()}return t.prototype.ngOnInit=function(){},Object.defineProperty(t.prototype,"setStaffList",{set:function(t){this.buildStructureLists(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setDepartmentList",{set:function(t){if(t)for(var n in this.departmentList=[],t)this.departmentList.push(t[n])},enumerable:!0,configurable:!0}),t.prototype.buildStructureLists=function(t){var n=this;this.pendingArr=[],this.mainArr=[],t.forEach(function(t){2==t.status||0==t.status?n.pendingArr.push(t):1==t.status&&0==t.did&&n.mainArr.push(t)})},t.prototype.togglePositionForm=function(t,n){n.stopPropagation(),(this.role.isCeo||this.role.isHr||this.role.isStaffMa)&&this.outOpenPositionForm.emit(t)},t.prototype.openStaffEditForm=function(t,n){(this.role.isCeo||this.role.isHr||this.role.isStaffMa)&&(n.stopPropagation(),this.outOpenStaffForm.emit([!0,t]))},t.prototype.clickPosition=function(t,n,l){(this.role.isCeo||this.role.isHr||this.role.isStaffMa)&&(t&&t.stopPropagation(),this.outClickPosition.emit({type:"position",data:n}))},t.prototype.clickEditDepartment=function(t,n){t.stopPropagation(),this.outEditDepartment.emit([n,!0])},t.prototype.toggleDerpat=function(t,n){t.stopPropagation(),n.toggleShow=!n.toggleShow},t.prototype.toggleShowMain=function(t){t.stopPropagation(),this.toggleMain=!this.toggleMain},t.prototype.chatWithStaff=function(t,n){t.stopPropagation(),this.router.navigate(["chat"],{queryParams:{type:"user",id:n.psid,form:2}})},t}(),ut=e._8({encapsulation:0,styles:[[".structure-list[_ngcontent-%COMP%]{float:left;position:relative;z-index:5}.contact-list-content[_ngcontent-%COMP%]{color:#fff;padding:0 10px;width:250px;height:calc(100vh - 150px);overflow-y:scroll;overflow-x:hidden}.contact-list-content[_ngcontent-%COMP%]   .sub-header[_ngcontent-%COMP%]{padding:10px;font-size:13px;text-transform:uppercase;color:#fff;position:relative}.contact-list-content[_ngcontent-%COMP%]   .sub-header[_ngcontent-%COMP%]:hover   .bi-icon-edit[_ngcontent-%COMP%]{display:inline-block}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]{line-height:1;color:#fff;min-height:20px;width:220px;padding:10px;border-radius:2px;cursor:pointer}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:28px;min-width:28px;height:28px;min-height:28px;border-radius:2px;border:.2px solid #979797}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .contact-name[_ngcontent-%COMP%]{overflow:hidden;max-width:89%;text-overflow:ellipsis;white-space:nowrap;font-size:12px}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .p-name[_ngcontent-%COMP%]{overflow:hidden;max-width:89%;text-overflow:ellipsis;white-space:nowrap;font-size:12px;margin-top:5px}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .bi-icon-chat-normal[_ngcontent-%COMP%]{display:none;color:#fff;-webkit-transition:.2s linear;transition:.2s linear}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .bi-icon-chat-normal[_ngcontent-%COMP%]::before{font-size:12px}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]   .bi-icon-chat-normal[_ngcontent-%COMP%]:hover{color:#5d576b}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]:hover{background-color:rgba(255,255,255,.2)}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]:hover   .bi-icon-chat-normal[_ngcontent-%COMP%]{display:block}.contact-list-content[_ngcontent-%COMP%]   .contact-list-action[_ngcontent-%COMP%]{min-height:16px}.contact-list-content[_ngcontent-%COMP%]   .contact-count[_ngcontent-%COMP%]{color:#d2d5f7;margin-left:5px}.contact-list-content[_ngcontent-%COMP%]   .bi-icon-down-white-close[_ngcontent-%COMP%]{font-weight:200;width:20px;height:20px;position:absolute;top:10px;margin-left:5px;display:inline-block;cursor:pointer;-webkit-transform:scale(.6);transform:scale(.6);-webkit-transition:.2s linear;transition:.2s linear}.contact-list-content[_ngcontent-%COMP%]   .bi-icon-down-white-close[_ngcontent-%COMP%]::before{font-size:12px}.contact-list-content[_ngcontent-%COMP%]   .bi-icon-down-white-close.active[_ngcontent-%COMP%]{font-weight:200;display:inline-block;cursor:pointer;-webkit-transform:rotate(-90deg) scale(.6) translate(2px);transform:rotate(-90deg) scale(.6) translate(2px)}.contact-list-content[_ngcontent-%COMP%]   .bi-icon-edit[_ngcontent-%COMP%]{position:absolute;display:none;cursor:pointer;right:20px}.contact-list-content[_ngcontent-%COMP%]   .bi-icon-edit[_ngcontent-%COMP%]::before{font-size:14px}.edit-position[_ngcontent-%COMP%]{height:80px;line-height:80px;text-align:center}.edit-position[_ngcontent-%COMP%]:hover{color:#fff}@media screen and (max-width:700px){.structure-list[_ngcontent-%COMP%]{width:80px}.contact-list-content[_ngcontent-%COMP%]{width:80px!important}.contact-list-content[_ngcontent-%COMP%]   .contact-list-item[_ngcontent-%COMP%]{width:55px}.contacy-info[_ngcontent-%COMP%]{display:none!important}.sub-header[_ngcontent-%COMP%]{width:75px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.edit-position[_ngcontent-%COMP%]{width:80px;text-align:center;height:80px;overflow:hidden}}"]],data:{}});function at(t){return e._34(0,[(t()(),e._10(0,0,null,null,25,"div",[["class","contact-list-item"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.openStaffEditForm(t.context.$implicit,l)&&e),e},null,null)),(t()(),e._32(-1,null,["\n          "])),(t()(),e._10(2,0,null,null,22,"div",[["class","ng-tns-c8-8"],["fxlayout","row"],["fxlayoutalign","start center"],["style","flex-direction: row; box-sizing: border-box; display: flex; max-height: 100%;align-items: center;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(4,0,null,null,4,"div",[["class","avatar-wrapper"],["fxflex","0 1 auto"],["fxlayoutalign","center center"],["style","flex: 0 1 auto; box-sizing: border-box;align-items: center; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(6,0,null,null,1,"img",[["class","avatar"]],[[8,"src",4]],null,null,null,null)),e._27(7,1),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(10,0,null,null,13,"div",[["class","contacy-info"],["fxflex",""],["fxlayout","row"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(12,0,null,null,6,"div",[["class",""],["fxflex",""],["fxlayout","column"],["fxlayoutalign","center start"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: column; display: flex; align-items: flex-start;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(14,0,null,null,1,"div",[["class","contact-name"]],null,null,null,null,null)),(t()(),e._32(15,null,["",""])),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(17,0,null,null,0,"div",[["class","p-name"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(20,0,null,null,2,"div",[["class","ng-tns-c8-8"],["fxlayout","column"],["fxlayoutalign","center end"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n          "])),(t()(),e._32(-1,null,["\n        "]))],null,function(t,n){t(n,6,0,e._33(n,6,0,t(n,7,0,e._22(n.parent,0),n.context.$implicit.profile))),t(n,15,0,n.context.$implicit.work_name)})}function pt(t){return e._34(0,[(t()(),e._10(0,0,null,null,26,"div",[["class","contact-list-item"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.clickPosition(l,t.context.$implicit,"0")&&e),e},null,null)),(t()(),e._32(-1,null,["\n          "])),(t()(),e._10(2,0,null,null,23,"div",[["class","ng-tns-c8-8"],["fxlayout","row"],["fxlayoutalign","start center"],["style","flex-direction: row; box-sizing: border-box; display: flex; max-height: 100%;align-items: center;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(4,0,null,null,4,"div",[["class","avatar-wrapper"],["fxflex","0 1 auto"],["fxlayoutalign","center center"],["style","flex: 0 1 auto; box-sizing: border-box;align-items: center; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(6,0,null,null,1,"img",[["class","avatar"]],[[8,"src",4]],null,null,null,null)),e._27(7,1),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(10,0,null,null,14,"div",[["class","contacy-info"],["fxflex",""],["fxlayout","row"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(12,0,null,null,6,"div",[["class",""],["fxflex",""],["fxlayout","column"],["fxlayoutalign","center start"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: column; display: flex; align-items: flex-start;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(14,0,null,null,1,"div",[["class","contact-name"]],null,null,null,null,null)),(t()(),e._32(15,null,["",""])),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(17,0,null,null,0,"div",[["class","p-name"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(20,0,null,null,3,"div",[["class","ng-tns-c8-8"],["fxlayout","column"],["fxlayoutalign","center end"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(22,0,null,null,0,"span",[["class","bi-icon-chat-normal"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.chatWithStaff(l,t.context.$implicit)&&e),e},null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n          "])),(t()(),e._32(-1,null,["\n        "]))],null,function(t,n){t(n,6,0,e._33(n,6,0,t(n,7,0,e._22(n.parent,0),n.context.$implicit.profile))),t(n,15,0,n.context.$implicit.work_name)})}function ct(t){return e._34(0,[(t()(),e._10(0,0,null,null,0,"span",[["class","bi-icon-edit"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.clickEditDepartment(l,t.parent.context.$implicit.did)&&e),e},null,null))],null,null)}function dt(t){return e._34(0,[(t()(),e._10(0,0,null,null,26,"div",[["class","contact-list-item"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.clickPosition(l,t.context.$implicit,t.context.$implicit.did)&&e),e},null,null)),(t()(),e._32(-1,null,["\n          "])),(t()(),e._10(2,0,null,null,23,"div",[["class","ng-tns-c8-8"],["fxlayout","row"],["fxlayoutalign","start center"],["style","flex-direction: row; box-sizing: border-box; display: flex; max-height: 100%;align-items: center;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(4,0,null,null,4,"div",[["class","avatar-wrapper"],["fxflex","0 1 auto"],["fxlayoutalign","center center"],["style","flex: 0 1 auto; box-sizing: border-box;align-items: center; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(6,0,null,null,1,"img",[["class","avatar"]],[[8,"src",4]],null,null,null,null)),e._27(7,1),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._10(10,0,null,null,14,"div",[["class","contacy-info"],["fxflex",""],["fxlayout","row"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: row; display: flex;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(12,0,null,null,6,"div",[["class",""],["fxflex",""],["fxlayout","column"],["fxlayoutalign","center start"],["style","flex: 1 1 1e-09px; box-sizing: border-box; flex-direction: column; display: flex; align-items: flex-start;"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(14,0,null,null,1,"div",[["class","contact-name"]],null,null,null,null,null)),(t()(),e._32(15,null,["",""])),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(17,0,null,null,0,"div",[["class","p-name"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n              "])),(t()(),e._10(20,0,null,null,3,"div",[["class","ng-tns-c8-8"],["fxlayout","column"],["fxlayoutalign","center end"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n                "])),(t()(),e._10(22,0,null,null,0,"span",[["class","bi-icon-chat-normal"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.chatWithStaff(l,t.context.$implicit)&&e),e},null,null)),(t()(),e._32(-1,null,["\n              "])),(t()(),e._32(-1,null,["\n            "])),(t()(),e._32(-1,null,["\n          "])),(t()(),e._32(-1,null,["\n        "]))],null,function(t,n){t(n,6,0,e._33(n,6,0,t(n,7,0,e._22(n.parent.parent,0),n.context.$implicit.profile))),t(n,15,0,n.context.$implicit.work_name)})}function ht(t){return e._34(0,[(t()(),e._10(0,0,null,null,18,"div",[["class","contact-list"],["fxlayout","column"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(2,0,null,null,9,"div",[["class","sub-header cur-pointer"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.toggleDerpat(l,t.context.$implicit)&&e),e},null,null)),(t()(),e._32(3,null,["\n        ","\n        "])),(t()(),e._10(4,0,null,null,1,"span",[["class","contact-count"]],null,null,null,null,null)),(t()(),e._32(5,null,["(",")"])),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(7,0,null,null,0,"span",[["class","bi-icon-down-white-close"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,ct)),e._9(10,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(13,0,null,null,4,"div",[["class","g-transition-2"]],[[2,"hide",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,dt)),e._9(16,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "]))],function(t,n){var l=n.component;t(n,10,0,(null==l.role?null:l.role.isCeo)||(null==l.role?null:l.role.isHr)||(null==l.role?null:l.role.isStaffMa)),t(n,16,0,n.context.$implicit.staff)},function(t,n){t(n,3,0,n.context.$implicit.name),t(n,5,0,null==n.context.$implicit?null:null==n.context.$implicit.staff?null:n.context.$implicit.staff.length),t(n,7,0,n.context.$implicit.toggleShow),t(n,13,0,n.context.$implicit.toggleShow)})}function ft(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"span",[["class","cur-pointer"]],null,null,null,null,null)),(t()(),e._32(1,null,["\n      ","\n    "])),e._25(131072,s.j,[s.k,e.h])],null,function(t,n){t(n,1,0,e._33(n,1,0,e._22(n,2).transform("EDIT POSITION GRADE")))})}function _t(t){return e._34(0,[e._25(0,rt.a,[Z.a]),(t()(),e._10(1,0,null,null,59,"div",[["class","structure-list mat-lavender-500-bg"],["data-step","2"],["id","step_s_2"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(3,0,null,null,1,"div",[["class","contact-list-header"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(6,0,null,null,47,"div",[["class","contact-list-content scrollbar p-t-20 mat-lavender-500-bg"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(9,0,null,null,16,"div",[["class","contact-list"],["fxlayout","column"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(11,0,null,null,7,"div",[["class","sub-header cur-pointer"]],null,[[null,"click"]],function(t,n,l){var e=!0,i=t.component;return"click"===n&&(e=0!=(i.togglePending=!i.togglePending)&&e),e},null,null)),(t()(),e._32(12,null,["\n        ","\n        "])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._10(14,0,null,null,1,"span",[["class","contact-count"]],null,null,null,null,null)),(t()(),e._32(15,null,["(",")"])),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(17,0,null,null,0,"span",[["class","bi-icon-down-white-close"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(20,0,null,null,4,"div",[["class","g-transition-2"]],[[2,"hide",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,at)),e._9(23,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(29,0,null,null,17,"div",[["class","contact-list"],["fxlayout","column"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(31,0,null,null,8,"div",[["class","sub-header cur-pointer"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.toggleShowMain(l)&&e),e},null,null)),(t()(),e._32(32,null,["\n        ","\n        "])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._10(34,0,null,null,1,"span",[["class","contact-count"]],null,null,null,null,null)),(t()(),e._32(35,null,["(",")"])),(t()(),e._32(-1,null,["\n        "])),(t()(),e._10(37,0,null,null,0,"span",[["class","bi-icon-down-white-close"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(41,0,null,null,4,"div",[["class","g-transition-2"]],[[2,"hide",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n        "])),(t()(),e._5(16777216,null,null,1,null,pt)),e._9(44,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n      "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,ht)),e._9(51,802816,null,0,o.k,[e.T,e.Q,e.u],{ngForOf:[0,"ngForOf"]},null),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(55,0,null,null,4,"div",[["class","edit-position"],["data-step","3"],["id","step_s_3"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.togglePositionForm(!0,l)&&e),e},null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._5(16777216,null,null,1,null,ft)),e._9(58,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n"]))],function(t,n){var l=n.component;t(n,23,0,l.pendingArr),t(n,44,0,l.mainArr),t(n,51,0,l.departmentList),t(n,58,0,(null==l.role?null:l.role.isCeo)||(null==l.role?null:l.role.isHr)||(null==l.role?null:l.role.isStaffMa))},function(t,n){var l=n.component;t(n,12,0,e._33(n,12,0,e._22(n,13).transform("PENDING"))),t(n,15,0,null==l.pendingArr?null:l.pendingArr.length),t(n,17,0,l.togglePending),t(n,20,0,l.togglePending),t(n,32,0,e._33(n,32,0,e._22(n,33).transform("MAIN"))),t(n,35,0,null==l.mainArr?null:l.mainArr.length),t(n,37,0,l.toggleMain),t(n,41,0,l.toggleMain)})}var gt=l("wNS+"),mt=l("ysZh"),vt=l("xjaO"),yt=l("iGUu"),bt=function(){function t(t,n,l,e,i,o,r,s,u){var a=this;this.api=t,this.typeService=n,this.router=l,this.activatedRoute=e,this.notificationService=i,this.helpService=o,this.renderer=r,this.dialogService=s,this.userStorage=u,this.departArr=[],this.allStructure=[],this.newPositionStructureId=1,this.newPositionTitleId=1,this.positionTitleArr=[],this.staffList=[],this.newStructureId=1,this.newDepartmentId=1,this.editStructureInfo={id:"0",parent_id:"0",pid:"0",did:"0",cid:"0",company_id:"0",sid:"",status:"1",uid:"0",work_name:"",profile:"",s_type:"p",p_level:"0",p_name:"",is_ass:"0",tid:"0",title_name:"",admin:[]},this.role={},this.companyId=this.userStorage.getCurrentCid(),this.activatedRoute.queryParams.subscribe(function(t){t.hasOwnProperty("did")&&t.did?(a.departmentId=t.did,a.initData()):(a.departmentId=0,a.initData())}),this.role=this.userStorage.getUserRole()}return t.prototype.ngOnInit=function(){},t.prototype.initData=function(){var t=this;this.hasInit?this.prepareTemplateData():(this.getAllStructureList(function(){t.prepareTemplateData()}),this.fetchAllPositionLevel(),this.fetchPositionTitle())},t.prototype.getAllStructureList=function(t){var n=this;this.api.authPost("allStructure",{cid:this.companyId}).subscribe(function(l){if(l.status===a.b.SUCCESS){if(l.data.hasOwnProperty("staff")&&l.data.staff.forEach(function(t){n.initPositionStaffEntity(t),n.staffList.push(t)}),n.staffList=n.typeService.clone(n.staffList),l.data.hasOwnProperty("structure"))for(var e in l.data.structure)"0"==(o=n.initPositionStructureEntity(l.data.structure[e])).parent_id&&"0"==o.is_ass&&(n.CEOEntity=o),n.allStructure.push(o);var i={};if(l.data.hasOwnProperty("department"))for(var e in l.data.department){var o=n.initStructureDepartmentEntity(l.data.department[e]);i.hasOwnProperty(o.did)||(i[o.did]=o)}n.departmentListSet=i,n.countDepart(),t&&t()}else console.error("\u83b7\u53d6\u7ec4\u7ec7\u67b6\u6784\u5217\u8868\u5931\u8d25")})},t.prototype.fetchAllPositionLevel=function(){var t=this;this.api.authPost("structurePosition",{data:{cid:this.companyId}}).subscribe(function(n){n.status===a.b.SUCCESS?t.setLocalPositionInfo(n.data):console.error("\u83b7\u53d6\u7ec4\u7ec7\u67b6\u6784\u804c\u7b49\u5931\u8d25")})},t.prototype.setLocalPositionInfo=function(t){var n=1;for(var l in t)n<parseInt(t[l].p_level)&&(n=parseInt(t[l].p_level));if(n!=this.typeService.getObjLength(t)){for(var e=[],i=0;i<n;i++)for(var l in e[i]={p_level:(i+1).toString(),position:[]},t)t[l].p_level===e[i].p_level&&(e[i]=t[l]);this._positionInfo=e}else this._positionInfo=t;var o=this._positionInfo;for(var l in o)o[l].level="1"===o[l].p_level?o[l].p_level+"st":"2"===o[l].p_level?o[l].p_level+"nd":"3"===o[l].p_level?o[l].p_level+"rd":o[l].p_level+"th"},t.prototype.fetchPositionTitle=function(){var t=this;this.api.authPost("structurePositionTitle",{data:{keyword:""}}).subscribe(function(n){n.status===a.b.SUCCESS?t.positionTitleArr=n.data:console.error("\u83b7\u53d6\u7ec4\u7ec7\u6784\u67b6\u804c\u4f4d\u540d\u79f0\u5931\u8d25")})},t.prototype.savePosition=function(t){var n=t[0],l=t[1],e=t[2],i=t[3];if(""!=n.title_name){var o=!1;for(var r in this.positionTitleArr)this.positionTitleArr[r].title_name==n.title_name&&(o=!0,n.tid=this.positionTitleArr[r].tid);o||(n.tid="t"+this.newPositionTitleId,this.positionTitleArr.push({tid:"t"+this.newPositionTitleId,title_name:n.title_name}),this.newPositionTitleId++)}else n.tid="0";if(i)this.allStructure.push(n);else for(var r in this.allStructure)if(this.allStructure[r].id==n.id){this.allStructure[r]=n;break}for(var r in this.staffList)l&&this.staffList[r].sid==l&&(this.staffList[r].status="2",this.staffList[r].did="-1",this.staffList[r].psid=""),e&&""!==e&&this.staffList[r].sid==e&&(this.staffList[r].status="1",this.staffList[r].did=n.did,this.staffList[r].psid=n.id);this.staffList=this.typeService.clone(this.staffList),this.prepareTemplateData()},t.prototype.prepareTemplateData=function(){if("0"!=this.departmentId){for(var t in this.departmentListSet)if(this.departmentListSet[t].did==this.departmentId){this.depName=this.departmentListSet[t].name;break}}else this.depName="";var n={};for(var l in this.departmentListSet)for(var e in n[l]=[],this.departmentListSet[l].staff=[],this.staffList)this.staffList[e].did==l&&this.departmentListSet[l].staff.push(this.staffList[e]);this.hasInit=!0,this.structureInfo={d:this.departmentListSet,s:this.allStructure}},t.prototype.compareStructure=function(){var t=this,n={cid:this.companyId,structure:[],positions:[],position_title:[],staff:[],department:[]},l=[];for(var e in this.allStructure)"p"!=(c=this.allStructure[e]).s_type&&"u"!=c.s_type||l.push({id:c.id,parent_id:c.parent_id,pid:c.pid,did:c.did,company_id:this.companyId,sid:c.sid,tid:c.tid,is_ass:c.is_ass});n.structure=l;var i=[];for(var e in this._positionInfo){(c=this._positionInfo[e]).position.forEach(function(n){var l=t.typeService.clone(n);delete l.staff,delete l.isEdit,i.push(l)});var o=[];for(var r in this.staffList){var s=this.staffList[r];s.sid!=this.CEOEntity.sid&&o.push({sid:s.sid,status:s.status})}n.staff=o}n.positions=i;var u=[];for(var e in this.positionTitleArr)0!=(c=this.positionTitleArr[e]).tid&&"t"==c.tid.toString().substring(0,1)&&u.push({tid:c.tid,title_name:c.title_name});n.position_title=u;var p=[];for(var e in this.departmentListSet){var c;p.push({cid:this.companyId,parent_id:(c=this.departmentListSet[e]).parent_id,name:c.name,did:c.did})}n.department=p,this.api.authPost("compareUploadStructure",{data:n}).subscribe(function(n){n.status===a.b.SUCCESS?t.uploadStructure():console.error("\u7ec4\u7ec7\u673a\u6784\u5168\u91cf\u5bf9\u6bd4\u5931\u8d25")})},t.prototype.uploadStructure=function(){var t=this;this.api.authPost("uploadStructureNew",{data:{cid:this.companyId}}).subscribe(function(n){n.status===a.b.SUCCESS?(t.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"success",title:"success",text:"Update structure success!",closeEvent:function(){t.notificationService.postNotification({act:vt.a.ACT_COMPONENT_STRUCTURE_REFRESH,data:{}})}}}),t.structureDraw.drawCount=1):console.error("\u4fdd\u5b58\u7ec4\u7ec7\u673a\u6784\u4fe1\u606f\u5931\u8d25")})},t.prototype.togglePositionForm=function(t){this.isShowPositionForm=t,this.isShowPositionForm&&(this.isShowStaffForm=!1,this.isShowDepartmentForm=!1)},t.prototype.openPositionForm=function(){this.isShowPositionForm=!0},t.prototype.toggleSatffForm=function(t){this.isShowStaffForm=t[0],this.isShowStaffForm&&(this.isShowPositionForm=!1,this.isShowDepartmentForm=!1),t[1]&&(this.editStaffInfo=this.initPositionStructureEntity(t[1]))},t.prototype.toggleDepartmentForm=function(t){this.isShowDepartmentForm=t},t.prototype.outEditDepartment=function(t){this.dealEditDepartment(t[0],t[1])},t.prototype.dealEditDepartment=function(t,n){var l;if(delete this.editStaffInfo,t){if(0!=t){for(var e in this.editDepartmentInfo={},this.editDepartmentInfo.all=this.departmentListSet,this.departmentListSet)if(this.departmentListSet[e].did==t){this.editDepartmentInfo.department=this.departmentListSet[e],l=this.departmentListSet[e].parent_id;break}if(l){var i=[],o="99999",r=void 0,s=[];for(var e in this.allStructure)this.allStructure[e].did==t&&(i.push(this.allStructure[e]),parseInt(this.allStructure[e].p_level)<parseInt(o)&&(o=this.allStructure[e].p_level));for(var e in this.editDepartmentInfo.staff=i,this.editDepartmentInfo.leader=[],this.allStructure)this.allStructure[e].id==l?r=this.allStructure[e]:"1"!=this.allStructure[e].is_ass&&"0"==this.allStructure[e].did&&parseInt(this.allStructure[e].p_level)<parseInt(o)&&s.push(this.allStructure[e]);this.editDepartmentInfo.leader=[r].concat(s)}}}else for(var e in this.newDepartmentId++,this.editDepartmentInfo={department:{did:"d"+this.newDepartmentId,name:"",cid:this.companyId,parent_id:n,num:1},staff:[],all:this.departmentListSet},this.allStructure)this.allStructure[e].id==n&&(this.editDepartmentInfo.leader=[this.allStructure[e]]);this.isShowPositionForm=!1,this.isShowStaffForm=!1,t?"0"!=t?n?this.isShowDepartmentForm=!0:this.showDepartment(t):(delete this.editDepartmentInfo,this.isShowDepartmentForm=!1):this.isShowDepartmentForm=!0},t.prototype.showDepartment=function(t){t&&("0"!=t?this.router.navigate(["/structure"],{queryParams:{did:t}}):this.router.navigate(["/structure/"]))},t.prototype.dealOutAddId=function(t){this.newStructureId=t},t.prototype.positionLevelChange=function(t){this._positionInfo=this.typeService.clone(t)},t.prototype.editStructure=function(t){if("position"===t.type||"subordinate"===t.type||"assistance"===t.type){delete t.data.editType;var n=void 0;if("subordinate"===t.type){if("1"===t.data.is_ass)return;t.data.did=this.departmentId,n=this.setSubordinate(t.data)}else if("assistance"===t.type){if("1"===t.data.is_ass)return;n=this.setAssistance(t.data)}else n=this.modifyStaff(t.data);this.dealPosition([this.departmentId,n])}else if("department"===t.type){if("1"===t.data.is_ass)return;this.dealEditDepartment(null,t.data.id)}else if("remove"===t.type)this.removePosition(t.data);else if("enter-department"===t.type)this.showDepartment(t.data.did);else if("edit-department"===t.type)this.dealEditDepartment(t.data.did,!0);else if("remove-department"===t.type){if(t.data.staff.length>0)return this.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"warning",title:"Warning",text:"There are employees in the department. If you need to remove the department, please delete all employees in the department first!"}}),!1;this.outSaveDepartment(["delete",t.data])}},t.prototype.dealPosition=function(t){var n,l=t[1];if("-1"==t[0])n=this.initPositionStructureEntity(l);else{for(var e in this.allStructure)if(""!=l.sid&&0!=l.sid&&this.allStructure[e].sid==l.sid){n=this.allStructure[e];break}n||(n=this.initPositionStructureEntity(l))}Object.assign(l,n),this.editStaffInfo=l,this.isShowStaffForm=!0,this.isShowDepartmentForm=!1,this.isShowPositionForm=!1},t.prototype.removePosition=function(t){var n=this;if(this.isShowDepartmentForm=!1,this.isShowPositionForm=!1,this.isShowStaffForm=!1,t.ass&&t.ass.length>0)for(var l in t.ass)if("1"==t.ass[l].is_ass)return;t.id!=this.CEOEntity.id&&this.dialogService.openDialog({width:"480px",position:{top:"180px"},data:{type:"confirm",title:"Confirm",deleteBtn:!0,cancelBtn:!0,text:"Do you agree to delete this position? that cannot be undone again!",btnEvent:function(){var l;for(var e in n.allStructure)if(t.id===n.allStructure[e].id){l=n.allStructure[e],n.allStructure.splice(parseInt(e),1);break}for(var i in n.allStructure)n.allStructure[i].parent_id==l.id&&(n.allStructure[i].parent_id=l.parent_id);for(var i in n.departmentListSet)n.departmentListSet[i].parent_id==l.id&&(n.departmentListSet[i].parent_id=l.parent_id);if(""!=l.sid)for(var i in n.staffList)n.staffList[i].sid==l.sid&&(n.staffList[i].psid="",n.staffList[i].status="2",n.staffList[i].did="-1");n.staffList=n.typeService.clone(n.staffList),n.prepareTemplateData()}}})},t.prototype.outSaveDepartment=function(t){var n=t[0],l=t[1],e=t[2];if("new"==n){var i={};i[l.did]=l,this.departmentListSet=Object.assign({},this.departmentListSet,i)}else if("edit"==n){var o=l.parent_id,r=e.id;if(o!=r)for(var s in this.allStructure)this.allStructure[s].did==l.did&&this.allStructure[s].parent_id==o&&(this.allStructure[s].parent_id=r);l.parent_id=e.id,this.departmentListSet[l.did]=l}else"delete"==n&&this.departmentListSet.hasOwnProperty(l.did)&&(delete this.departmentListSet[l.did],this.isShowDepartmentForm=!1,this.router.navigate(["/structure/"]));this.departmentListSet=this.typeService.clone(this.departmentListSet),this.prepareTemplateData(),this.countDepart()},t.prototype.setSubordinate=function(t){this.newStructureId++;var n=this.typeService.clone(this.editStructureInfo);return n.parent_id=t.id,n.p_level=t.p_level,n.id="ps"+this.newStructureId,n.editType="sub",n.did=t.did,n.cid=t.company_id,n.company_id=t.company_id,n},t.prototype.setAssistance=function(t){this.newStructureId++;var n=this.typeService.clone(this.editStructureInfo);return n.pid=t.pid,n.p_name=t.p_name,n.p_level=t.p_level,n.is_ass="1",n.parent_id=t.id,n.id="ps"+this.newStructureId,n.editType="ass",n.did=t.did,n.cid=t.company_id,n.company_id=t.company_id,n},t.prototype.modifyStaff=function(t){var n=this.typeService.clone(this.editStructureInfo);return n.pid=t.pid,n.id=t.id,n.p_name=t.p_name,n.p_level=t.p_level,n.sid=t.sid,n.is_ass=t.is_ass,n.parent_id=t.parent_id,n.editType="pos",n.did=t.did,n.cid=t.company_id,n.tid=t.tid,n.company_id=t.company_id,n},t.prototype.initPositionStructureEntity=function(t){this.newPositionStructureId++;var n={id:"ps"+this.newPositionStructureId,sid:"0",uuid:"0",profile:"",work_name:"",parent_id:"",did:this.departmentId?this.departmentId:"0",tid:"0",pid:"0",is_ass:"0",admin:{id:"0",company_id:"0"},company_id:"0",p_level:"",p_name:"",s_type:"",title_name:""};return"-1"==t.did&&(t.parent_id=""),Object.assign(n,t),n},t.prototype.initStructureDepartmentEntity=function(t){var n={did:"0",cid:"",name:"",parent_id:"",num:0};return Object.assign(n,t),n},t.prototype.initPositionStaffEntity=function(t){var n={profile:"",profile_id:"0",status:"0",sid:"0",uuid:"0",did:"-1",psid:"0",work_name:""};return Object.assign(n,t),n},t.prototype.countDepart=function(){for(var t in this.departArr=[],this.departmentListSet)this.departArr.push(this.departmentListSet[t])},t.prototype.routerBack=function(t){var n=this;t.stopPropagation(),this.structureDraw&&this.structureDraw.drawCount>1?this.dialogService.openDialog({width:"470px",position:{top:"180px"},data:{type:"confirm",title:"Confirm",text:"strcture change",confirmBtn:!0,cancelBtn:!0,btnEvent:function(){n.router.navigate(["dashboard"])}}}):this.router.navigate(["dashboard"])},t.prototype.showHelpDialog=function(){var t=this,n=document.getElementsByTagName("body")[0];this.renderer.setElementClass(n,"body-help",!0);for(var l=yt.introJs(),e=[],i=1;i<6;i++){var o={element:"#step_s_"+i.toString(),intro:this.helpService.getHelpHtml("HELP_STRUCTURE_"+i.toString())};e.push(o)}l.setOptions({prevLabel:this.helpService.getPreviousBtn(),nextLabel:this.helpService.getNextBtn(),doneLabel:this.helpService.getDoneBtn(),exitOnEsc:!0,hidePrev:!1,hideNext:!0,exitOnOverlayClick:!0,showProgress:!0,showBullets:!0,showStepNumbers:!1,disableInteraction:!0,tooltipClass:"help-wrap help-no-padding show-btn",steps:e}),l.start(),l.onbeforechange(function(t){t.getAttribute("data-step")}),l.onchange(function(l){var e=l.getAttribute("data-step");t.renderer.setElementClass(n,"body-hack",3==e),t.renderer.setElementClass(n,"body-hack2",4==e)}),l.onafterchange(function(t){t.getAttribute("data-step")?l.setOption("tooltipClass","help-wrap help-no-padding"):l.setOption("tooltipClass","help-wrap help-no-padding hide-btn")}),l.onexit(function(){t.renderer.setElementClass(n,"body-help",!1),t.renderer.setElementClass(n,"body-hack",!1),t.renderer.setElementClass(n,"body-hack2",!1)})},t}(),xt=e._8({encapsulation:0,styles:[[".structure-header[_ngcontent-%COMP%]{width:calc(100vw - 250px);height:70px;-webkit-box-shadow:0 0 1px rgba(255,255,255,.3),0 0 1px rgba(255,255,255,.3),0 0 1px rgba(255,255,255,.3),0 0 1px rgba(66,66,66,.3);box-shadow:0 0 1px rgba(255,255,255,.3),0 0 1px rgba(255,255,255,.3),0 0 1px rgba(255,255,255,.3),0 0 1px rgba(66,66,66,.3);float:left}.structure-header[_ngcontent-%COMP%]   .profile-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;text-align:left;margin-top:20px;margin-left:5px;width:250px}.structure-header[_ngcontent-%COMP%]   .title-desc[_ngcontent-%COMP%]{color:#9193ab;font-size:12px;font-weight:400;font-style:italic}.structure-header[_ngcontent-%COMP%]   .bi-icon-structure-2[_ngcontent-%COMP%]{margin-right:5px}.structure-header[_ngcontent-%COMP%]   .bi-icon-structure-2[_ngcontent-%COMP%]::before{font-size:16px;color:#5d576b}.structure-header[_ngcontent-%COMP%]   .bi-icon-esc1[_ngcontent-%COMP%]{border-left:1px solid #e2e2e9;width:40px;height:40px;line-height:40px;margin-top:15px;text-align:center;margin-right:20px;color:rgba(145,147,171,.5);cursor:pointer}.structure-header[_ngcontent-%COMP%]   .bi-icon-help2[_ngcontent-%COMP%]{cursor:pointer;margin-top:25px;margin-right:10px}.structure-header[_ngcontent-%COMP%]   .bi-icon-help2[_ngcontent-%COMP%]::before{color:rgba(145,147,171,.5);font-size:16px}.edit-department-from[_ngcontent-%COMP%], .edit-staff-position[_ngcontent-%COMP%]{width:450px;height:calc(100vh - 70px);position:absolute;top:0;left:-202px;background:#fff;z-index:2;-webkit-transition:.2s linear;transition:.2s linear;-webkit-box-shadow:2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5);box-shadow:2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5)}.edit-department-from.active[_ngcontent-%COMP%], .edit-staff-position.active[_ngcontent-%COMP%]{left:250px;z-index:3}.edit-position-form[_ngcontent-%COMP%]{width:450px;height:calc(100vh - 70px);position:absolute;top:0;left:-202px;background:#fff;z-index:2;-webkit-transition:.2s linear;transition:.2s linear;-webkit-box-shadow:2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5);box-shadow:2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5),2px 0 1px rgba(136,136,136,.5)}.edit-position-form.active[_ngcontent-%COMP%]{left:250px;z-index:4}@media screen and (max-width:700px){.edit-department-from[_ngcontent-%COMP%], .edit-staff-position[_ngcontent-%COMP%]{width:calc(100% - 100px)!important;left:calc(178px - 100vw)!important}.edit-department-from.active[_ngcontent-%COMP%], .edit-staff-position.active[_ngcontent-%COMP%]{left:80px!important}.edit-position-form[_ngcontent-%COMP%]{width:calc(100% - 100px)!important;left:calc(178px - 100vw)!important}.edit-position-form.active[_ngcontent-%COMP%]{left:80px!important}.profile-title[_ngcontent-%COMP%]{width:106px!important}.small-screen[_ngcontent-%COMP%]{display:none}.structure-header[_ngcontent-%COMP%]{width:calc(100vw - 80px)!important;position:absolute;left:80px}.button-upload[_ngcontent-%COMP%]{width:60px!important}}.w80[_ngcontent-%COMP%]{width:80%}"]],data:{}});function wt(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"bi-structure-edit-postion-level",[],null,[[null,"outPositionChange"],[null,"outClosePositionForm"]],function(t,n,l){var e=!0,i=t.component;return"outPositionChange"===n&&(e=!1!==i.positionLevelChange(l)&&e),"outClosePositionForm"===n&&(e=!1!==i.togglePositionForm(l)&&e),e},w,f)),e._9(1,114688,null,0,h,[u.a,c.a,d.a,p.a],{setPositionLevel:[0,"setPositionLevel"]},{outClosePositionForm:"outClosePositionForm",outPositionChange:"outPositionChange"}),(t()(),e._32(-1,null,["\n  "]))],function(t,n){t(n,1,0,n.component._positionInfo)},null)}function St(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"bi-structure-edit-staff-position",[],null,[[null,"outEditPosition"],[null,"outAddId"],[null,"outNewLevel"],[null,"outCloseStaffForm"]],function(t,n,l){var e=!0,i=t.component;return"outEditPosition"===n&&(e=!1!==i.savePosition(l)&&e),"outAddId"===n&&(e=!1!==i.dealOutAddId(l)&&e),"outNewLevel"===n&&(e=!1!==i.openPositionForm(l)&&e),"outCloseStaffForm"===n&&(e=!1!==i.toggleSatffForm(l)&&e),e},W,j)),e._9(1,638976,null,0,N,[E.a,d.a,c.a,e.G],{setEditStaffInfo:[0,"setEditStaffInfo"],setPositionTitle:[1,"setPositionTitle"],setStaffList:[2,"setStaffList"],setAllStructure:[3,"setAllStructure"],setPositionLevel:[4,"setPositionLevel"],setDepartmentId:[5,"setDepartmentId"],setNewStructureId:[6,"setNewStructureId"]},{outCloseStaffForm:"outCloseStaffForm",outAddId:"outAddId",outEditPosition:"outEditPosition",outNewLevel:"outNewLevel"}),(t()(),e._32(-1,null,["\n  "]))],function(t,n){var l=n.component;t(n,1,0,l.editStaffInfo,l.positionTitleArr,l.staffList,l.allStructure,l._positionInfo,l.departmentId,l.newStructureId)},null)}function Ct(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"bi-structure-edit-department",[],null,[[null,"outSaveDepartment"],[null,"outCloseDepartmentForm"]],function(t,n,l){var e=!0,i=t.component;return"outSaveDepartment"===n&&(e=!1!==i.outSaveDepartment(l)&&e),"outCloseDepartmentForm"===n&&(e=!1!==i.toggleDepartmentForm(l)&&e),e},Y,q)),e._9(1,114688,null,0,Q,[d.a],{setDepartmentInfo:[0,"setDepartmentInfo"],setCompanyId:[1,"setCompanyId"],setDepartmentId:[2,"setDepartmentId"],setStructureUser:[3,"setStructureUser"]},{outCloseDepartmentForm:"outCloseDepartmentForm",outSaveDepartment:"outSaveDepartment"}),(t()(),e._32(-1,null,["\n  "]))],function(t,n){var l=n.component;t(n,1,0,l.editDepartmentInfo,l.companyId,l.departmentId,l.allStructure)},null)}function Pt(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"div",[["class","pull-right g-button button-upload m-t-15 m-r-10"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.compareStructure()&&e),e},null,null)),(t()(),e._32(1,null,["",""])),e._25(131072,s.j,[s.k,e.h])],null,function(t,n){t(n,1,0,e._33(n,1,0,e._22(n,2).transform("UPLOAD")))})}function Ot(t){return e._34(0,[(t()(),e._10(0,0,null,null,3,"bi-structure-draw",[],null,[[null,"outEditDepartment"],[null,"outEditStructure"]],function(t,n,l){var e=!0,i=t.component;return"outEditDepartment"===n&&(e=!1!==i.dealEditDepartment(l)&&e),"outEditStructure"===n&&(e=!1!==i.editStructure(l)&&e),e},ot,et)),e._28(512,null,K,K,[X.m,Z.a,J.a,p.a,L.a,c.a]),e._9(2,4308992,[[1,4],["structureDraw",4]],0,nt,[X.m,e.G,X.a,K,lt.e,c.a,d.a,L.a],{setCompanyId:[0,"setCompanyId"],setDepartmentId:[1,"setDepartmentId"],setStructureInfo:[2,"setStructureInfo"]},{outEditStructure:"outEditStructure",outEditDepartment:"outEditDepartment"}),(t()(),e._32(-1,null,["\n"]))],function(t,n){var l=n.component;t(n,2,0,l.companyId,l.departmentId,l.structureInfo)},null)}function It(t){return e._34(0,[e._30(671088640,1,{structureDraw:0}),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(2,0,null,null,2,"bi-structure-list",[],null,[[null,"outOpenStaffForm"],[null,"outClickPosition"],[null,"outEditDepartment"],[null,"outOpenPositionForm"]],function(t,n,l){var e=!0,i=t.component;return"outOpenStaffForm"===n&&(e=!1!==i.toggleSatffForm(l)&&e),"outClickPosition"===n&&(e=!1!==i.editStructure(l)&&e),"outEditDepartment"===n&&(e=!1!==i.outEditDepartment(l)&&e),"outOpenPositionForm"===n&&(e=!1!==i.togglePositionForm(l)&&e),e},_t,ut)),e._9(3,114688,null,0,st,[u.a,X.m,p.a],{setStaffList:[0,"setStaffList"],setDepartmentList:[1,"setDepartmentList"]},{outOpenPositionForm:"outOpenPositionForm",outOpenStaffForm:"outOpenStaffForm",outClickPosition:"outClickPosition",outEditDepartment:"outEditDepartment"}),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(7,0,null,null,4,"div",[["class","edit-position-form g-transition-2"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._5(16777216,null,null,1,null,wt)),e._9(10,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(14,0,null,null,4,"div",[["class","edit-staff-position g-transition-2"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._5(16777216,null,null,1,null,St)),e._9(17,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n"])),(t()(),e._10(21,0,null,null,4,"div",[["class","edit-department-from g-transition-2"]],[[2,"active",null]],null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._5(16777216,null,null,1,null,Ct)),e._9(24,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n\n\n\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._10(28,0,null,null,34,"div",[["class","structure-header"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(30,0,null,null,24,"div",[["class","profile-title pull-left m-l-10"],["data-step","1"],["id","step_s_1"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(32,0,null,null,0,"span",[["class","bi-icon-structure-2 pull-left g-header-margin"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(34,0,null,null,3,"span",[["class","pull-left f18-f w80"]],null,null,null,null,null)),(t()(),e._10(35,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),e._32(36,null,["",""])),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._10(39,0,null,null,14,"div",[["class","clearfix pull-left title-desc m-l-10 small-screen"]],null,null,null,null,null)),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(41,0,null,null,3,"span",[["class","f17-f"]],null,null,null,null,null)),(t()(),e._32(42,null,[""," "," ",""])),e._25(131072,s.j,[s.k,e.h]),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(46,0,null,null,1,"span",[["class","wo-head-line f17-f"],["style","padding-left:3px;font-style: normal"]],null,null,null,null,null)),(t()(),e._32(-1,null,["|"])),(t()(),e._32(-1,null,["\n      "])),(t()(),e._10(49,0,null,null,3,"span",[["class","f17-f"]],null,null,null,null,null)),(t()(),e._32(50,null,[""," "," ",""])),e._25(131072,s.j,[s.k,e.h]),e._25(131072,s.j,[s.k,e.h]),(t()(),e._32(-1,null,["\n    "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(56,0,null,null,0,"span",[["class","pull-right bi-icon-esc1"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.routerBack(l)&&e),e},null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._10(58,0,null,null,0,"span",[["class","pull-right bi-icon-help2 cur-pointer"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.showHelpDialog()&&e),e},null,null)),(t()(),e._32(-1,null,["\n  "])),(t()(),e._5(16777216,null,null,1,null,Pt)),e._9(61,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null),(t()(),e._32(-1,null,["\n"])),(t()(),e._32(-1,null,["\n"])),(t()(),e._5(16777216,null,null,1,null,Ot)),e._9(65,16384,null,0,o.l,[e.T,e.Q],{ngIf:[0,"ngIf"]},null)],function(t,n){var l=n.component;t(n,3,0,l.staffList,l.departmentListSet),t(n,10,0,l.isShowPositionForm),t(n,17,0,l.isShowStaffForm),t(n,24,0,l.isShowDepartmentForm),t(n,61,0,(null==l.role?null:l.role.isCeo)||(null==l.role?null:l.role.isHr)||(null==l.role?null:l.role.isStaffMa)),t(n,65,0,l.structureInfo)},function(t,n){var l=n.component;t(n,7,0,l.isShowPositionForm),t(n,14,0,l.isShowStaffForm),t(n,21,0,l.isShowDepartmentForm),t(n,36,0,e._33(n,36,0,e._22(n,37).transform("ORGANIZATION STRUCTURE"))),t(n,42,0,e._33(n,42,0,e._22(n,43).transform("Total")),null==l.departArr?null:l.departArr.length,e._33(n,42,2,e._22(n,44).transform("departments"))),t(n,50,0,e._33(n,50,0,e._22(n,51).transform("Total")),null==l.staffList?null:l.staffList.length,e._33(n,50,2,e._22(n,52).transform("staffs")))})}var Mt=e._6("bi-structure",bt,function(t){return e._34(0,[(t()(),e._10(0,0,null,null,2,"bi-structure",[],null,null,null,It,xt)),e._28(512,null,gt.a,gt.a,[c.a,p.a]),e._9(2,114688,null,0,bt,[u.a,c.a,X.m,X.a,mt.a,gt.a,e.G,d.a,p.a],null,null)],function(t,n){t(n,2,0)},null)},{},{},[]),kt=l("zI1e"),Lt=l("ATT8"),Dt=l("efkn"),Et=l("D0Vv"),Ft=l("INQx"),Tt=l("uTR6"),At=l("XWga"),Nt=l("ItHS"),jt=l("UI5o"),Bt=l("613x"),Gt=l("XHgV"),Rt=l("1T37"),zt=l("U/+3"),Ht=l("Mcof"),$t=l("p5vt"),Ut=l("6sdf"),Wt=l("a9YB"),Qt=l("1GLL"),qt=l("z7Rf"),Vt=l("OE0E"),Yt=l("kINy"),Xt=l("NwsS"),Zt=l("7u3n"),Jt=l("Z+/l"),Kt=l("hahM"),tn=l("YEB1"),nn=function(){},ln=l("bBLp"),en=l("lpND"),on=l("pnOF"),rn=l("bkcK"),sn=l("AlNW"),un=l("rr3N"),an=l("kJ/S"),pn=l("6GVX"),cn=l("YKmy"),dn=l("TBIh"),hn=l("gsbp"),fn=l("bq7Y"),_n=l("1OzB"),gn=l("AP/s"),mn=l("+76Z"),vn=l("ZuzD"),yn=l("yvW1"),bn=l("q2BM"),xn=l("4rwD"),wn=l("704W"),Sn=l("sqmn"),Cn=l("Xbny"),Pn=l("Bp8q"),On=l("y/Fr"),In=l("JkvL"),Mn=l("86rF"),kn=l("Oz7M"),Ln=l("XMYV"),Dn=l("W91W"),En=l("j06o"),Fn=l("Qxcj"),Tn=l("vd2s");l.d(n,"StructureModuleNgFactory",function(){return An});var An=e._7(i,[],function(t){return e._18([e._19(512,e.j,e._3,[[8,[Mt,kt.a,Lt.a,Dt.a,Dt.b,Et.a,Ft.a,Tt.a,At.a]],[3,e.j],e.z]),e._19(4608,o.n,o.m,[e.w,[2,o.z]]),e._19(4608,r.x,r.x,[]),e._19(4608,Nt.i,Nt.o,[o.d,e.D,Nt.m]),e._19(4608,Nt.p,Nt.p,[Nt.i,Nt.n]),e._19(5120,Nt.a,function(t){return[t]},[Nt.p]),e._19(4608,Nt.l,Nt.l,[]),e._19(6144,Nt.j,null,[Nt.l]),e._19(4608,Nt.h,Nt.h,[Nt.j]),e._19(6144,Nt.b,null,[Nt.h]),e._19(4608,Nt.f,Nt.k,[Nt.b,e.s]),e._19(4608,Nt.c,Nt.c,[Nt.f]),e._19(4608,jt.a,jt.a,[]),e._19(4608,Bt.a,Bt.a,[u.a,p.a,Z.a]),e._19(6144,I.b,null,[o.d]),e._19(4608,I.c,I.c,[[2,I.b]]),e._19(4608,Gt.a,Gt.a,[]),e._19(5120,Rt.d,Rt.b,[[3,Rt.d],e.B,Gt.a]),e._19(5120,Rt.g,Rt.f,[[3,Rt.g],Gt.a,e.B]),e._19(4608,O.i,O.i,[Rt.d,Rt.g,e.B,o.d]),e._19(5120,O.e,O.j,[[3,O.e],o.d]),e._19(4608,O.h,O.h,[Rt.g,o.d]),e._19(5120,O.f,O.m,[[3,O.f],o.d]),e._19(4608,O.c,O.c,[O.i,O.e,e.j,O.h,O.f,e.g,e.s,e.B,o.d]),e._19(5120,O.k,O.l,[O.c]),e._19(4608,zt.k,zt.k,[Gt.a]),e._19(4608,zt.j,zt.j,[zt.k,e.B,o.d]),e._19(136192,zt.d,zt.b,[[3,zt.d],o.d]),e._19(5120,zt.n,zt.m,[[3,zt.n],[2,zt.l],o.d]),e._19(5120,zt.i,zt.g,[[3,zt.i],e.B,Gt.a]),e._19(5120,lt.c,lt.d,[O.c]),e._19(4608,lt.e,lt.e,[O.c,e.s,[2,o.h],[2,lt.b],lt.c,[3,lt.e],O.e]),e._19(4608,Ht.d,Ht.d,[Gt.a]),e._19(135680,Ht.a,Ht.a,[Ht.d,e.B]),e._19(4608,$t.b,$t.b,[O.c,zt.n,e.s,Ht.a,[3,$t.b]]),e._19(4608,Ut.b,Ut.b,[]),e._19(5120,P.b,P.c,[O.c]),e._19(5120,Wt.c,Wt.d,[[3,Wt.c]]),e._19(4608,C.d,C.d,[]),e._19(4608,Qt.h,Qt.h,[]),e._19(5120,Qt.a,Qt.b,[O.c]),e._19(5120,qt.d,qt.a,[[3,qt.d],[2,Nt.c],Vt.c,[2,o.d]]),e._19(5120,Yt.b,Yt.g,[O.c]),e._19(6144,C.h,null,[e.w]),e._19(4608,C.c,C.z,[[2,C.h]]),e._19(5120,Xt.a,Xt.b,[O.c]),e._19(5120,Zt.b,Zt.c,[O.c]),e._19(5120,Jt.b,Jt.a,[[3,Jt.b]]),e._19(4608,Vt.f,C.e,[[2,C.i],[2,C.n]]),e._19(5120,Kt.b,Kt.a,[[3,Kt.b]]),e._19(4608,tn.a,tn.a,[]),e._19(512,o.c,o.c,[]),e._19(512,X.p,X.p,[[2,X.u],[2,X.m]]),e._19(512,r.u,r.u,[]),e._19(512,r.i,r.i,[]),e._19(512,nn,nn,[]),e._19(512,Nt.e,Nt.e,[]),e._19(512,Nt.d,Nt.d,[]),e._19(512,s.h,s.h,[]),e._19(512,ln.a,ln.a,[]),e._19(512,en.a,en.a,[]),e._19(512,on.a,on.a,[]),e._19(512,I.a,I.a,[]),e._19(512,rn.g,rn.g,[]),e._19(512,Gt.b,Gt.b,[]),e._19(512,Rt.c,Rt.c,[]),e._19(512,O.g,O.g,[]),e._19(512,zt.a,zt.a,[]),e._19(256,C.f,!0,[]),e._19(512,C.n,C.n,[[2,C.f]]),e._19(512,lt.j,lt.j,[]),e._19(512,sn.a,sn.a,[]),e._19(512,Ht.c,Ht.c,[]),e._19(512,$t.d,$t.d,[]),e._19(512,un.a,un.a,[]),e._19(512,an.h,an.h,[]),e._19(512,C.y,C.y,[]),e._19(512,Ut.c,Ut.c,[]),e._19(512,pn.a,pn.a,[]),e._19(512,cn.a,cn.a,[]),e._19(512,dn.d,dn.d,[]),e._19(512,C.w,C.w,[]),e._19(512,C.u,C.u,[]),e._19(512,P.e,P.e,[]),e._19(512,hn.c,hn.c,[]),e._19(512,fn.a,fn.a,[]),e._19(512,_n.a,_n.a,[]),e._19(512,gn.c,gn.c,[]),e._19(512,mn.a,mn.a,[]),e._19(512,Qt.i,Qt.i,[]),e._19(512,vn.b,vn.b,[]),e._19(512,yn.c,yn.c,[]),e._19(512,bn.a,bn.a,[]),e._19(512,C.p,C.p,[]),e._19(512,xn.a,xn.a,[]),e._19(512,qt.c,qt.c,[]),e._19(512,wn.c,wn.c,[]),e._19(512,Sn.c,Sn.c,[]),e._19(512,Yt.e,Yt.e,[]),e._19(512,C.A,C.A,[]),e._19(512,C.r,C.r,[]),e._19(512,Xt.d,Xt.d,[]),e._19(512,Zt.e,Zt.e,[]),e._19(512,Jt.c,Jt.c,[]),e._19(512,Cn.b,Cn.b,[]),e._19(512,Pn.a,Pn.a,[]),e._19(512,On.a,On.a,[]),e._19(512,In.a,In.a,[]),e._19(512,Mn.b,Mn.b,[]),e._19(512,Kt.c,Kt.c,[]),e._19(512,kn.d,kn.d,[]),e._19(512,tn.b,tn.b,[]),e._19(512,Ln.k,Ln.k,[]),e._19(512,Dn.a,Dn.a,[]),e._19(512,En.b,En.b,[]),e._19(512,Fn.a,Fn.a,[]),e._19(512,Tn.a,Tn.a,[]),e._19(512,i,i,[]),e._19(1024,X.k,function(){return[[{path:"",component:bt}]]},[]),e._19(256,Nt.m,"XSRF-TOKEN",[]),e._19(256,Nt.n,"X-XSRF-TOKEN",[]),e._19(256,an.a,!1,[]),e._19(256,Yt.a,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[]),e._19(256,C.g,C.k,[]),e._19(256,Zt.a,{showDelay:0,hideDelay:0,touchendHideDelay:1500},[])])})}});